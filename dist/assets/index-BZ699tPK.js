(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function $o(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const B={},Lt=[],We=()=>{},Xi=()=>!1,Us=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ko=e=>e.startsWith("onUpdate:"),he=Object.assign,qo=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},el=Object.prototype.hasOwnProperty,V=(e,t)=>el.call(e,t),L=Array.isArray,Dt=e=>Bs(e)==="[object Map]",fn=e=>Bs(e)==="[object Set]",F=e=>typeof e=="function",ee=e=>typeof e=="string",pt=e=>typeof e=="symbol",Z=e=>e!==null&&typeof e=="object",hn=e=>(Z(e)||F(e))&&F(e.then)&&F(e.catch),dn=Object.prototype.toString,Bs=e=>dn.call(e),tl=e=>Bs(e).slice(8,-1),pn=e=>Bs(e)==="[object Object]",Ho=e=>ee(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Zt=$o(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ws=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},sl=/-(\w)/g,ft=Ws(e=>e.replace(sl,(t,s)=>s?s.toUpperCase():"")),ol=/\B([A-Z])/g,gt=Ws(e=>e.replace(ol,"-$1").toLowerCase()),gn=Ws(e=>e.charAt(0).toUpperCase()+e.slice(1)),oo=Ws(e=>e?`on${gn(e)}`:""),ut=(e,t)=>!Object.is(e,t),ks=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},wo=(e,t,s,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:s})},So=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _r;const Gs=()=>_r||(_r=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ft(e){if(L(e)){const t={};for(let s=0;s<e.length;s++){const o=e[s],r=ee(o)?ll(o):Ft(o);if(r)for(const n in r)t[n]=r[n]}return t}else if(ee(e)||Z(e))return e}const rl=/;(?![^(]*\))/g,nl=/:([^]+)/,il=/\/\*[^]*?\*\//g;function ll(e){const t={};return e.replace(il,"").split(rl).forEach(s=>{if(s){const o=s.split(nl);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function ps(e){let t="";if(ee(e))t=e;else if(L(e))for(let s=0;s<e.length;s++){const o=ps(e[s]);o&&(t+=o+" ")}else if(Z(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const al="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cl=$o(al);function mn(e){return!!e||e===""}const bn=e=>!!(e&&e.__v_isRef===!0),St=e=>ee(e)?e:e==null?"":L(e)||Z(e)&&(e.toString===dn||!F(e.toString))?bn(e)?St(e.value):JSON.stringify(e,vn,2):String(e),vn=(e,t)=>bn(t)?vn(e,t.value):Dt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[o,r],n)=>(s[ro(o,n)+" =>"]=r,s),{})}:fn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>ro(s))}:pt(t)?ro(t):Z(t)&&!L(t)&&!pn(t)?String(t):t,ro=(e,t="")=>{var s;return pt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let we;class ul{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=we,!t&&we&&(this.index=(we.scopes||(we.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=we;try{return we=this,t()}finally{we=s}}}on(){++this._on===1&&(this.prevScope=we,we=this)}off(){this._on>0&&--this._on===0&&(we=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,o;for(s=0,o=this.effects.length;s<o;s++)this.effects[s].stop();for(this.effects.length=0,s=0,o=this.cleanups.length;s<o;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,o=this.scopes.length;s<o;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function fl(){return we}let Q;const no=new WeakSet;class _n{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,we&&we.active&&we.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,no.has(this)&&(no.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||wn(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,yr(this),Sn(this);const t=Q,s=Le;Q=this,Le=!0;try{return this.fn()}finally{Cn(this),Q=t,Le=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Uo(t);this.deps=this.depsTail=void 0,yr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?no.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Co(this)&&this.run()}get dirty(){return Co(this)}}let yn=0,Xt,es;function wn(e,t=!1){if(e.flags|=8,t){e.next=es,es=e;return}e.next=Xt,Xt=e}function jo(){yn++}function Vo(){if(--yn>0)return;if(es){let t=es;for(es=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;Xt;){let t=Xt;for(Xt=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=s}}if(e)throw e}function Sn(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Cn(e){let t,s=e.depsTail,o=s;for(;o;){const r=o.prevDep;o.version===-1?(o===s&&(s=r),Uo(o),hl(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=r}e.deps=t,e.depsTail=s}function Co(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(xn(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function xn(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ns)||(e.globalVersion=ns,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Co(e))))return;e.flags|=2;const t=e.dep,s=Q,o=Le;Q=e,Le=!0;try{Sn(e);const r=e.fn(e._value);(t.version===0||ut(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Q=s,Le=o,Cn(e),e.flags&=-3}}function Uo(e,t=!1){const{dep:s,prevSub:o,nextSub:r}=e;if(o&&(o.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=o,e.nextSub=void 0),s.subs===e&&(s.subs=o,!o&&s.computed)){s.computed.flags&=-5;for(let n=s.computed.deps;n;n=n.nextDep)Uo(n,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function hl(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Le=!0;const En=[];function tt(){En.push(Le),Le=!1}function st(){const e=En.pop();Le=e===void 0?!0:e}function yr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Q;Q=void 0;try{t()}finally{Q=s}}}let ns=0;class dl{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Bo{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Q||!Le||Q===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Q)s=this.activeLink=new dl(Q,this),Q.deps?(s.prevDep=Q.depsTail,Q.depsTail.nextDep=s,Q.depsTail=s):Q.deps=Q.depsTail=s,kn(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const o=s.nextDep;o.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=o),s.prevDep=Q.depsTail,s.nextDep=void 0,Q.depsTail.nextDep=s,Q.depsTail=s,Q.deps===s&&(Q.deps=o)}return s}trigger(t){this.version++,ns++,this.notify(t)}notify(t){jo();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Vo()}}}function kn(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)kn(o)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const xo=new WeakMap,kt=Symbol(""),Eo=Symbol(""),is=Symbol("");function ue(e,t,s){if(Le&&Q){let o=xo.get(e);o||xo.set(e,o=new Map);let r=o.get(s);r||(o.set(s,r=new Bo),r.map=o,r.key=s),r.track()}}function Ze(e,t,s,o,r,n){const i=xo.get(e);if(!i){ns++;return}const l=a=>{a&&a.trigger()};if(jo(),t==="clear")i.forEach(l);else{const a=L(e),c=a&&Ho(s);if(a&&s==="length"){const u=Number(o);i.forEach((h,p)=>{(p==="length"||p===is||!pt(p)&&p>=u)&&l(h)})}else switch((s!==void 0||i.has(void 0))&&l(i.get(s)),c&&l(i.get(is)),t){case"add":a?c&&l(i.get("length")):(l(i.get(kt)),Dt(e)&&l(i.get(Eo)));break;case"delete":a||(l(i.get(kt)),Dt(e)&&l(i.get(Eo)));break;case"set":Dt(e)&&l(i.get(kt));break}}Vo()}function It(e){const t=j(e);return t===e?t:(ue(t,"iterate",is),Oe(e)?t:t.map(ie))}function Qs(e){return ue(e=j(e),"iterate",is),e}const pl={__proto__:null,[Symbol.iterator](){return io(this,Symbol.iterator,ie)},concat(...e){return It(this).concat(...e.map(t=>L(t)?It(t):t))},entries(){return io(this,"entries",e=>(e[1]=ie(e[1]),e))},every(e,t){return ze(this,"every",e,t,void 0,arguments)},filter(e,t){return ze(this,"filter",e,t,s=>s.map(ie),arguments)},find(e,t){return ze(this,"find",e,t,ie,arguments)},findIndex(e,t){return ze(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ze(this,"findLast",e,t,ie,arguments)},findLastIndex(e,t){return ze(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ze(this,"forEach",e,t,void 0,arguments)},includes(...e){return lo(this,"includes",e)},indexOf(...e){return lo(this,"indexOf",e)},join(e){return It(this).join(e)},lastIndexOf(...e){return lo(this,"lastIndexOf",e)},map(e,t){return ze(this,"map",e,t,void 0,arguments)},pop(){return Bt(this,"pop")},push(...e){return Bt(this,"push",e)},reduce(e,...t){return wr(this,"reduce",e,t)},reduceRight(e,...t){return wr(this,"reduceRight",e,t)},shift(){return Bt(this,"shift")},some(e,t){return ze(this,"some",e,t,void 0,arguments)},splice(...e){return Bt(this,"splice",e)},toReversed(){return It(this).toReversed()},toSorted(e){return It(this).toSorted(e)},toSpliced(...e){return It(this).toSpliced(...e)},unshift(...e){return Bt(this,"unshift",e)},values(){return io(this,"values",ie)}};function io(e,t,s){const o=Qs(e),r=o[t]();return o!==e&&!Oe(e)&&(r._next=r.next,r.next=()=>{const n=r._next();return n.value&&(n.value=s(n.value)),n}),r}const gl=Array.prototype;function ze(e,t,s,o,r,n){const i=Qs(e),l=i!==e&&!Oe(e),a=i[t];if(a!==gl[t]){const h=a.apply(e,n);return l?ie(h):h}let c=s;i!==e&&(l?c=function(h,p){return s.call(this,ie(h),p,e)}:s.length>2&&(c=function(h,p){return s.call(this,h,p,e)}));const u=a.call(i,c,o);return l&&r?r(u):u}function wr(e,t,s,o){const r=Qs(e);let n=s;return r!==e&&(Oe(e)?s.length>3&&(n=function(i,l,a){return s.call(this,i,l,a,e)}):n=function(i,l,a){return s.call(this,i,ie(l),a,e)}),r[t](n,...o)}function lo(e,t,s){const o=j(e);ue(o,"iterate",is);const r=o[t](...s);return(r===-1||r===!1)&&Qo(s[0])?(s[0]=j(s[0]),o[t](...s)):r}function Bt(e,t,s=[]){tt(),jo();const o=j(e)[t].apply(e,s);return Vo(),st(),o}const ml=$o("__proto__,__v_isRef,__isVue"),Pn=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(pt));function bl(e){pt(e)||(e=String(e));const t=j(this);return ue(t,"has",e),t.hasOwnProperty(e)}class Mn{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,o){if(s==="__v_skip")return t.__v_skip;const r=this._isReadonly,n=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return n;if(s==="__v_raw")return o===(r?n?Pl:On:n?In:An).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const i=L(t);if(!r){let a;if(i&&(a=pl[s]))return a;if(s==="hasOwnProperty")return bl}const l=Reflect.get(t,s,fe(t)?t:o);return(pt(s)?Pn.has(s):ml(s))||(r||ue(t,"get",s),n)?l:fe(l)?i&&Ho(s)?l:l.value:Z(l)?r?Rn(l):ls(l):l}}class Tn extends Mn{constructor(t=!1){super(!1,t)}set(t,s,o,r){let n=t[s];if(!this._isShallow){const a=ht(n);if(!Oe(o)&&!ht(o)&&(n=j(n),o=j(o)),!L(t)&&fe(n)&&!fe(o))return a?!1:(n.value=o,!0)}const i=L(t)&&Ho(s)?Number(s)<t.length:V(t,s),l=Reflect.set(t,s,o,fe(t)?t:r);return t===j(r)&&(i?ut(o,n)&&Ze(t,"set",s,o):Ze(t,"add",s,o)),l}deleteProperty(t,s){const o=V(t,s);t[s];const r=Reflect.deleteProperty(t,s);return r&&o&&Ze(t,"delete",s,void 0),r}has(t,s){const o=Reflect.has(t,s);return(!pt(s)||!Pn.has(s))&&ue(t,"has",s),o}ownKeys(t){return ue(t,"iterate",L(t)?"length":kt),Reflect.ownKeys(t)}}class vl extends Mn{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const _l=new Tn,yl=new vl,wl=new Tn(!0);const ko=e=>e,ws=e=>Reflect.getPrototypeOf(e);function Sl(e,t,s){return function(...o){const r=this.__v_raw,n=j(r),i=Dt(n),l=e==="entries"||e===Symbol.iterator&&i,a=e==="keys"&&i,c=r[e](...o),u=s?ko:t?Rs:ie;return!t&&ue(n,"iterate",a?Eo:kt),{next(){const{value:h,done:p}=c.next();return p?{value:h,done:p}:{value:l?[u(h[0]),u(h[1])]:u(h),done:p}},[Symbol.iterator](){return this}}}}function Ss(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Cl(e,t){const s={get(r){const n=this.__v_raw,i=j(n),l=j(r);e||(ut(r,l)&&ue(i,"get",r),ue(i,"get",l));const{has:a}=ws(i),c=t?ko:e?Rs:ie;if(a.call(i,r))return c(n.get(r));if(a.call(i,l))return c(n.get(l));n!==i&&n.get(r)},get size(){const r=this.__v_raw;return!e&&ue(j(r),"iterate",kt),Reflect.get(r,"size",r)},has(r){const n=this.__v_raw,i=j(n),l=j(r);return e||(ut(r,l)&&ue(i,"has",r),ue(i,"has",l)),r===l?n.has(r):n.has(r)||n.has(l)},forEach(r,n){const i=this,l=i.__v_raw,a=j(l),c=t?ko:e?Rs:ie;return!e&&ue(a,"iterate",kt),l.forEach((u,h)=>r.call(n,c(u),c(h),i))}};return he(s,e?{add:Ss("add"),set:Ss("set"),delete:Ss("delete"),clear:Ss("clear")}:{add(r){!t&&!Oe(r)&&!ht(r)&&(r=j(r));const n=j(this);return ws(n).has.call(n,r)||(n.add(r),Ze(n,"add",r,r)),this},set(r,n){!t&&!Oe(n)&&!ht(n)&&(n=j(n));const i=j(this),{has:l,get:a}=ws(i);let c=l.call(i,r);c||(r=j(r),c=l.call(i,r));const u=a.call(i,r);return i.set(r,n),c?ut(n,u)&&Ze(i,"set",r,n):Ze(i,"add",r,n),this},delete(r){const n=j(this),{has:i,get:l}=ws(n);let a=i.call(n,r);a||(r=j(r),a=i.call(n,r)),l&&l.call(n,r);const c=n.delete(r);return a&&Ze(n,"delete",r,void 0),c},clear(){const r=j(this),n=r.size!==0,i=r.clear();return n&&Ze(r,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=Sl(r,e,t)}),s}function Wo(e,t){const s=Cl(e,t);return(o,r,n)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?o:Reflect.get(V(s,r)&&r in o?s:o,r,n)}const xl={get:Wo(!1,!1)},El={get:Wo(!1,!0)},kl={get:Wo(!0,!1)};const An=new WeakMap,In=new WeakMap,On=new WeakMap,Pl=new WeakMap;function Ml(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Tl(e){return e.__v_skip||!Object.isExtensible(e)?0:Ml(tl(e))}function ls(e){return ht(e)?e:Go(e,!1,_l,xl,An)}function Al(e){return Go(e,!1,wl,El,In)}function Rn(e){return Go(e,!0,yl,kl,On)}function Go(e,t,s,o,r){if(!Z(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const n=Tl(e);if(n===0)return e;const i=r.get(e);if(i)return i;const l=new Proxy(e,n===2?o:s);return r.set(e,l),l}function $t(e){return ht(e)?$t(e.__v_raw):!!(e&&e.__v_isReactive)}function ht(e){return!!(e&&e.__v_isReadonly)}function Oe(e){return!!(e&&e.__v_isShallow)}function Qo(e){return e?!!e.__v_raw:!1}function j(e){const t=e&&e.__v_raw;return t?j(t):e}function Il(e){return!V(e,"__v_skip")&&Object.isExtensible(e)&&wo(e,"__v_skip",!0),e}const ie=e=>Z(e)?ls(e):e,Rs=e=>Z(e)?Rn(e):e;function fe(e){return e?e.__v_isRef===!0:!1}function Et(e){return Ol(e,!1)}function Ol(e,t){return fe(e)?e:new Rl(e,t)}class Rl{constructor(t,s){this.dep=new Bo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:j(t),this._value=s?t:ie(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,o=this.__v_isShallow||Oe(t)||ht(t);t=o?t:j(t),ut(t,s)&&(this._rawValue=t,this._value=o?t:ie(t),this.dep.trigger())}}function Nn(e){return fe(e)?e.value:e}const Nl={get:(e,t,s)=>t==="__v_raw"?e:Nn(Reflect.get(e,t,s)),set:(e,t,s,o)=>{const r=e[t];return fe(r)&&!fe(s)?(r.value=s,!0):Reflect.set(e,t,s,o)}};function Ln(e){return $t(e)?e:new Proxy(e,Nl)}class Ll{constructor(t,s,o){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Bo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ns-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Q!==this)return wn(this,!0),!0}get value(){const t=this.dep.track();return xn(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Dl(e,t,s=!1){let o,r;return F(e)?o=e:(o=e.get,r=e.set),new Ll(o,r,s)}const Cs={},Ns=new WeakMap;let Ct;function Fl(e,t=!1,s=Ct){if(s){let o=Ns.get(s);o||Ns.set(s,o=[]),o.push(e)}}function $l(e,t,s=B){const{immediate:o,deep:r,once:n,scheduler:i,augmentJob:l,call:a}=s,c=x=>r?x:Oe(x)||r===!1||r===0?Xe(x,1):Xe(x);let u,h,p,g,b=!1,v=!1;if(fe(e)?(h=()=>e.value,b=Oe(e)):$t(e)?(h=()=>c(e),b=!0):L(e)?(v=!0,b=e.some(x=>$t(x)||Oe(x)),h=()=>e.map(x=>{if(fe(x))return x.value;if($t(x))return c(x);if(F(x))return a?a(x,2):x()})):F(e)?t?h=a?()=>a(e,2):e:h=()=>{if(p){tt();try{p()}finally{st()}}const x=Ct;Ct=u;try{return a?a(e,3,[g]):e(g)}finally{Ct=x}}:h=We,t&&r){const x=h,K=r===!0?1/0:r;h=()=>Xe(x(),K)}const R=fl(),T=()=>{u.stop(),R&&R.active&&qo(R.effects,u)};if(n&&t){const x=t;t=(...K)=>{x(...K),T()}}let C=v?new Array(e.length).fill(Cs):Cs;const O=x=>{if(!(!(u.flags&1)||!u.dirty&&!x))if(t){const K=u.run();if(r||b||(v?K.some((de,X)=>ut(de,C[X])):ut(K,C))){p&&p();const de=Ct;Ct=u;try{const X=[K,C===Cs?void 0:v&&C[0]===Cs?[]:C,g];C=K,a?a(t,3,X):t(...X)}finally{Ct=de}}}else u.run()};return l&&l(O),u=new _n(h),u.scheduler=i?()=>i(O,!1):O,g=x=>Fl(x,!1,u),p=u.onStop=()=>{const x=Ns.get(u);if(x){if(a)a(x,4);else for(const K of x)K();Ns.delete(u)}},t?o?O(!0):C=u.run():i?i(O.bind(null,!0),!0):u.run(),T.pause=u.pause.bind(u),T.resume=u.resume.bind(u),T.stop=T,T}function Xe(e,t=1/0,s){if(t<=0||!Z(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,fe(e))Xe(e.value,t,s);else if(L(e))for(let o=0;o<e.length;o++)Xe(e[o],t,s);else if(fn(e)||Dt(e))e.forEach(o=>{Xe(o,t,s)});else if(pn(e)){for(const o in e)Xe(e[o],t,s);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Xe(e[o],t,s)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gs(e,t,s,o){try{return o?e(...o):e()}catch(r){zs(r,t,s)}}function Ge(e,t,s,o){if(F(e)){const r=gs(e,t,s,o);return r&&hn(r)&&r.catch(n=>{zs(n,t,s)}),r}if(L(e)){const r=[];for(let n=0;n<e.length;n++)r.push(Ge(e[n],t,s,o));return r}}function zs(e,t,s,o=!0){const r=t?t.vnode:null,{errorHandler:n,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||B;if(t){let l=t.parent;const a=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const u=l.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,a,c)===!1)return}l=l.parent}if(n){tt(),gs(n,null,10,[e,a,c]),st();return}}Kl(e,s,r,o,i)}function Kl(e,t,s,o=!0,r=!1){if(r)throw e;console.error(e)}const me=[];let Ve=-1;const Kt=[];let lt=null,Ot=0;const Dn=Promise.resolve();let Ls=null;function Fn(e){const t=Ls||Dn;return e?t.then(this?e.bind(this):e):t}function ql(e){let t=Ve+1,s=me.length;for(;t<s;){const o=t+s>>>1,r=me[o],n=as(r);n<e||n===e&&r.flags&2?t=o+1:s=o}return t}function zo(e){if(!(e.flags&1)){const t=as(e),s=me[me.length-1];!s||!(e.flags&2)&&t>=as(s)?me.push(e):me.splice(ql(t),0,e),e.flags|=1,$n()}}function $n(){Ls||(Ls=Dn.then(qn))}function Hl(e){L(e)?Kt.push(...e):lt&&e.id===-1?lt.splice(Ot+1,0,e):e.flags&1||(Kt.push(e),e.flags|=1),$n()}function Sr(e,t,s=Ve+1){for(;s<me.length;s++){const o=me[s];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;me.splice(s,1),s--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Kn(e){if(Kt.length){const t=[...new Set(Kt)].sort((s,o)=>as(s)-as(o));if(Kt.length=0,lt){lt.push(...t);return}for(lt=t,Ot=0;Ot<lt.length;Ot++){const s=lt[Ot];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}lt=null,Ot=0}}const as=e=>e.id==null?e.flags&2?-1:1/0:e.id;function qn(e){try{for(Ve=0;Ve<me.length;Ve++){const t=me[Ve];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),gs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ve<me.length;Ve++){const t=me[Ve];t&&(t.flags&=-2)}Ve=-1,me.length=0,Kn(),Ls=null,(me.length||Kt.length)&&qn()}}let Ie=null,Hn=null;function Ds(e){const t=Ie;return Ie=e,Hn=e&&e.type.__scopeId||null,t}function jl(e,t=Ie,s){if(!t||e._n)return e;const o=(...r)=>{o._d&&Ir(-1);const n=Ds(t);let i;try{i=e(...r)}finally{Ds(n),o._d&&Ir(1)}return i};return o._n=!0,o._c=!0,o._d=!0,o}function Vl(e,t){if(Ie===null)return e;const s=eo(Ie),o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[n,i,l,a=B]=t[r];n&&(F(n)&&(n={mounted:n,updated:n}),n.deep&&Xe(i),o.push({dir:n,instance:s,value:i,oldValue:void 0,arg:l,modifiers:a}))}return e}function yt(e,t,s,o){const r=e.dirs,n=t&&t.dirs;for(let i=0;i<r.length;i++){const l=r[i];n&&(l.oldValue=n[i].value);let a=l.dir[o];a&&(tt(),Ge(a,s,8,[e.el,l,e,t]),st())}}const Ul=Symbol("_vte"),Bl=e=>e.__isTeleport;function Yo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Yo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Ys(e,t){return F(e)?he({name:e.name},t,{setup:e}):e}function jn(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ts(e,t,s,o,r=!1){if(L(e)){e.forEach((b,v)=>ts(b,t&&(L(t)?t[v]:t),s,o,r));return}if(ss(o)&&!r){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&ts(e,t,s,o.component.subTree);return}const n=o.shapeFlag&4?eo(o.component):o.el,i=r?null:n,{i:l,r:a}=e,c=t&&t.r,u=l.refs===B?l.refs={}:l.refs,h=l.setupState,p=j(h),g=h===B?()=>!1:b=>V(p,b);if(c!=null&&c!==a&&(ee(c)?(u[c]=null,g(c)&&(h[c]=null)):fe(c)&&(c.value=null)),F(a))gs(a,l,12,[i,u]);else{const b=ee(a),v=fe(a);if(b||v){const R=()=>{if(e.f){const T=b?g(a)?h[a]:u[a]:a.value;r?L(T)&&qo(T,n):L(T)?T.includes(n)||T.push(n):b?(u[a]=[n],g(a)&&(h[a]=u[a])):(a.value=[n],e.k&&(u[e.k]=a.value))}else b?(u[a]=i,g(a)&&(h[a]=i)):v&&(a.value=i,e.k&&(u[e.k]=i))};i?(R.id=-1,ke(R,s)):R()}}}Gs().requestIdleCallback;Gs().cancelIdleCallback;const ss=e=>!!e.type.__asyncLoader,Vn=e=>e.type.__isKeepAlive;function Wl(e,t){Un(e,"a",t)}function Gl(e,t){Un(e,"da",t)}function Un(e,t,s=be){const o=e.__wdc||(e.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Js(t,o,s),s){let r=s.parent;for(;r&&r.parent;)Vn(r.parent.vnode)&&Ql(o,t,s,r),r=r.parent}}function Ql(e,t,s,o){const r=Js(t,e,o,!0);Fs(()=>{qo(o[t],r)},s)}function Js(e,t,s=be,o=!1){if(s){const r=s[e]||(s[e]=[]),n=t.__weh||(t.__weh=(...i)=>{tt();const l=ms(s),a=Ge(t,s,e,i);return l(),st(),a});return o?r.unshift(n):r.push(n),n}}const ot=e=>(t,s=be)=>{(!us||e==="sp")&&Js(e,(...o)=>t(...o),s)},zl=ot("bm"),Jo=ot("m"),Yl=ot("bu"),Jl=ot("u"),Zl=ot("bum"),Fs=ot("um"),Xl=ot("sp"),ea=ot("rtg"),ta=ot("rtc");function sa(e,t=be){Js("ec",e,t)}const oa=Symbol.for("v-ndc");function Bn(e,t,s,o){let r;const n=s,i=L(e);if(i||ee(e)){const l=i&&$t(e);let a=!1,c=!1;l&&(a=!Oe(e),c=ht(e),e=Qs(e)),r=new Array(e.length);for(let u=0,h=e.length;u<h;u++)r[u]=t(a?c?Rs(ie(e[u])):ie(e[u]):e[u],u,void 0,n)}else if(typeof e=="number"){r=new Array(e);for(let l=0;l<e;l++)r[l]=t(l+1,l,void 0,n)}else if(Z(e))if(e[Symbol.iterator])r=Array.from(e,(l,a)=>t(l,a,void 0,n));else{const l=Object.keys(e);r=new Array(l.length);for(let a=0,c=l.length;a<c;a++){const u=l[a];r[a]=t(e[u],u,a,n)}}else r=[];return r}const Po=e=>e?di(e)?eo(e):Po(e.parent):null,os=he(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Po(e.parent),$root:e=>Po(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Gn(e),$forceUpdate:e=>e.f||(e.f=()=>{zo(e.update)}),$nextTick:e=>e.n||(e.n=Fn.bind(e.proxy)),$watch:e=>Ea.bind(e)}),ao=(e,t)=>e!==B&&!e.__isScriptSetup&&V(e,t),ra={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:o,data:r,props:n,accessCache:i,type:l,appContext:a}=e;let c;if(t[0]!=="$"){const g=i[t];if(g!==void 0)switch(g){case 1:return o[t];case 2:return r[t];case 4:return s[t];case 3:return n[t]}else{if(ao(o,t))return i[t]=1,o[t];if(r!==B&&V(r,t))return i[t]=2,r[t];if((c=e.propsOptions[0])&&V(c,t))return i[t]=3,n[t];if(s!==B&&V(s,t))return i[t]=4,s[t];Mo&&(i[t]=0)}}const u=os[t];let h,p;if(u)return t==="$attrs"&&ue(e.attrs,"get",""),u(e);if((h=l.__cssModules)&&(h=h[t]))return h;if(s!==B&&V(s,t))return i[t]=4,s[t];if(p=a.config.globalProperties,V(p,t))return p[t]},set({_:e},t,s){const{data:o,setupState:r,ctx:n}=e;return ao(r,t)?(r[t]=s,!0):o!==B&&V(o,t)?(o[t]=s,!0):V(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(n[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:o,appContext:r,propsOptions:n}},i){let l;return!!s[i]||e!==B&&V(e,i)||ao(t,i)||(l=n[0])&&V(l,i)||V(o,i)||V(os,i)||V(r.config.globalProperties,i)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:V(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Cr(e){return L(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Mo=!0;function na(e){const t=Gn(e),s=e.proxy,o=e.ctx;Mo=!1,t.beforeCreate&&xr(t.beforeCreate,e,"bc");const{data:r,computed:n,methods:i,watch:l,provide:a,inject:c,created:u,beforeMount:h,mounted:p,beforeUpdate:g,updated:b,activated:v,deactivated:R,beforeDestroy:T,beforeUnmount:C,destroyed:O,unmounted:x,render:K,renderTracked:de,renderTriggered:X,errorCaptured:q,serverPrefetch:Fe,expose:se,inheritAttrs:le,components:Qe,directives:vs,filters:to}=t;if(c&&ia(c,o,null),i)for(const Y in i){const W=i[Y];F(W)&&(o[Y]=W.bind(s))}if(r){const Y=r.call(s,s);Z(Y)&&(e.data=ls(Y))}if(Mo=!0,n)for(const Y in n){const W=n[Y],vt=F(W)?W.bind(s,s):F(W.get)?W.get.bind(s,s):We,_s=!F(W)&&F(W.set)?W.set.bind(s):We,_t=gi({get:vt,set:_s});Object.defineProperty(o,Y,{enumerable:!0,configurable:!0,get:()=>_t.value,set:$e=>_t.value=$e})}if(l)for(const Y in l)Wn(l[Y],o,s,Y);if(a){const Y=F(a)?a.call(s):a;Reflect.ownKeys(Y).forEach(W=>{ha(W,Y[W])})}u&&xr(u,e,"c");function pe(Y,W){L(W)?W.forEach(vt=>Y(vt.bind(s))):W&&Y(W.bind(s))}if(pe(zl,h),pe(Jo,p),pe(Yl,g),pe(Jl,b),pe(Wl,v),pe(Gl,R),pe(sa,q),pe(ta,de),pe(ea,X),pe(Zl,C),pe(Fs,x),pe(Xl,Fe),L(se))if(se.length){const Y=e.exposed||(e.exposed={});se.forEach(W=>{Object.defineProperty(Y,W,{get:()=>s[W],set:vt=>s[W]=vt,enumerable:!0})})}else e.exposed||(e.exposed={});K&&e.render===We&&(e.render=K),le!=null&&(e.inheritAttrs=le),Qe&&(e.components=Qe),vs&&(e.directives=vs),Fe&&jn(e)}function ia(e,t,s=We){L(e)&&(e=To(e));for(const o in e){const r=e[o];let n;Z(r)?"default"in r?n=Ps(r.from||o,r.default,!0):n=Ps(r.from||o):n=Ps(r),fe(n)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>n.value,set:i=>n.value=i}):t[o]=n}}function xr(e,t,s){Ge(L(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,s)}function Wn(e,t,s,o){let r=o.includes(".")?ii(s,o):()=>s[o];if(ee(e)){const n=t[e];F(n)&&Ms(r,n)}else if(F(e))Ms(r,e.bind(s));else if(Z(e))if(L(e))e.forEach(n=>Wn(n,t,s,o));else{const n=F(e.handler)?e.handler.bind(s):t[e.handler];F(n)&&Ms(r,n,e)}}function Gn(e){const t=e.type,{mixins:s,extends:o}=t,{mixins:r,optionsCache:n,config:{optionMergeStrategies:i}}=e.appContext,l=n.get(t);let a;return l?a=l:!r.length&&!s&&!o?a=t:(a={},r.length&&r.forEach(c=>$s(a,c,i,!0)),$s(a,t,i)),Z(t)&&n.set(t,a),a}function $s(e,t,s,o=!1){const{mixins:r,extends:n}=t;n&&$s(e,n,s,!0),r&&r.forEach(i=>$s(e,i,s,!0));for(const i in t)if(!(o&&i==="expose")){const l=la[i]||s&&s[i];e[i]=l?l(e[i],t[i]):t[i]}return e}const la={data:Er,props:kr,emits:kr,methods:Yt,computed:Yt,beforeCreate:ge,created:ge,beforeMount:ge,mounted:ge,beforeUpdate:ge,updated:ge,beforeDestroy:ge,beforeUnmount:ge,destroyed:ge,unmounted:ge,activated:ge,deactivated:ge,errorCaptured:ge,serverPrefetch:ge,components:Yt,directives:Yt,watch:ca,provide:Er,inject:aa};function Er(e,t){return t?e?function(){return he(F(e)?e.call(this,this):e,F(t)?t.call(this,this):t)}:t:e}function aa(e,t){return Yt(To(e),To(t))}function To(e){if(L(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function ge(e,t){return e?[...new Set([].concat(e,t))]:t}function Yt(e,t){return e?he(Object.create(null),e,t):t}function kr(e,t){return e?L(e)&&L(t)?[...new Set([...e,...t])]:he(Object.create(null),Cr(e),Cr(t??{})):t}function ca(e,t){if(!e)return t;if(!t)return e;const s=he(Object.create(null),e);for(const o in t)s[o]=ge(e[o],t[o]);return s}function Qn(){return{app:null,config:{isNativeTag:Xi,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ua=0;function fa(e,t){return function(o,r=null){F(o)||(o=he({},o)),r!=null&&!Z(r)&&(r=null);const n=Qn(),i=new WeakSet,l=[];let a=!1;const c=n.app={_uid:ua++,_component:o,_props:r,_container:null,_context:n,_instance:null,version:Ga,get config(){return n.config},set config(u){},use(u,...h){return i.has(u)||(u&&F(u.install)?(i.add(u),u.install(c,...h)):F(u)&&(i.add(u),u(c,...h))),c},mixin(u){return n.mixins.includes(u)||n.mixins.push(u),c},component(u,h){return h?(n.components[u]=h,c):n.components[u]},directive(u,h){return h?(n.directives[u]=h,c):n.directives[u]},mount(u,h,p){if(!a){const g=c._ceVNode||De(o,r);return g.appContext=n,p===!0?p="svg":p===!1&&(p=void 0),e(g,u,p),a=!0,c._container=u,u.__vue_app__=c,eo(g.component)}},onUnmount(u){l.push(u)},unmount(){a&&(Ge(l,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,h){return n.provides[u]=h,c},runWithContext(u){const h=qt;qt=c;try{return u()}finally{qt=h}}};return c}}let qt=null;function ha(e,t){if(be){let s=be.provides;const o=be.parent&&be.parent.provides;o===s&&(s=be.provides=Object.create(o)),s[e]=t}}function Ps(e,t,s=!1){const o=Ha();if(o||qt){let r=qt?qt._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return s&&F(t)?t.call(o&&o.proxy):t}}const zn={},Yn=()=>Object.create(zn),Jn=e=>Object.getPrototypeOf(e)===zn;function da(e,t,s,o=!1){const r={},n=Yn();e.propsDefaults=Object.create(null),Zn(e,t,r,n);for(const i in e.propsOptions[0])i in r||(r[i]=void 0);s?e.props=o?r:Al(r):e.type.props?e.props=r:e.props=n,e.attrs=n}function pa(e,t,s,o){const{props:r,attrs:n,vnode:{patchFlag:i}}=e,l=j(r),[a]=e.propsOptions;let c=!1;if((o||i>0)&&!(i&16)){if(i&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let p=u[h];if(Zs(e.emitsOptions,p))continue;const g=t[p];if(a)if(V(n,p))g!==n[p]&&(n[p]=g,c=!0);else{const b=ft(p);r[b]=Ao(a,l,b,g,e,!1)}else g!==n[p]&&(n[p]=g,c=!0)}}}else{Zn(e,t,r,n)&&(c=!0);let u;for(const h in l)(!t||!V(t,h)&&((u=gt(h))===h||!V(t,u)))&&(a?s&&(s[h]!==void 0||s[u]!==void 0)&&(r[h]=Ao(a,l,h,void 0,e,!0)):delete r[h]);if(n!==l)for(const h in n)(!t||!V(t,h))&&(delete n[h],c=!0)}c&&Ze(e.attrs,"set","")}function Zn(e,t,s,o){const[r,n]=e.propsOptions;let i=!1,l;if(t)for(let a in t){if(Zt(a))continue;const c=t[a];let u;r&&V(r,u=ft(a))?!n||!n.includes(u)?s[u]=c:(l||(l={}))[u]=c:Zs(e.emitsOptions,a)||(!(a in o)||c!==o[a])&&(o[a]=c,i=!0)}if(n){const a=j(s),c=l||B;for(let u=0;u<n.length;u++){const h=n[u];s[h]=Ao(r,a,h,c[h],e,!V(c,h))}}return i}function Ao(e,t,s,o,r,n){const i=e[s];if(i!=null){const l=V(i,"default");if(l&&o===void 0){const a=i.default;if(i.type!==Function&&!i.skipFactory&&F(a)){const{propsDefaults:c}=r;if(s in c)o=c[s];else{const u=ms(r);o=c[s]=a.call(null,t),u()}}else o=a;r.ce&&r.ce._setProp(s,o)}i[0]&&(n&&!l?o=!1:i[1]&&(o===""||o===gt(s))&&(o=!0))}return o}const ga=new WeakMap;function Xn(e,t,s=!1){const o=s?ga:t.propsCache,r=o.get(e);if(r)return r;const n=e.props,i={},l=[];let a=!1;if(!F(e)){const u=h=>{a=!0;const[p,g]=Xn(h,t,!0);he(i,p),g&&l.push(...g)};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!n&&!a)return Z(e)&&o.set(e,Lt),Lt;if(L(n))for(let u=0;u<n.length;u++){const h=ft(n[u]);Pr(h)&&(i[h]=B)}else if(n)for(const u in n){const h=ft(u);if(Pr(h)){const p=n[u],g=i[h]=L(p)||F(p)?{type:p}:he({},p),b=g.type;let v=!1,R=!0;if(L(b))for(let T=0;T<b.length;++T){const C=b[T],O=F(C)&&C.name;if(O==="Boolean"){v=!0;break}else O==="String"&&(R=!1)}else v=F(b)&&b.name==="Boolean";g[0]=v,g[1]=R,(v||V(g,"default"))&&l.push(h)}}const c=[i,l];return Z(e)&&o.set(e,c),c}function Pr(e){return e[0]!=="$"&&!Zt(e)}const Zo=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",Xo=e=>L(e)?e.map(Be):[Be(e)],ma=(e,t,s)=>{if(t._n)return t;const o=jl((...r)=>Xo(t(...r)),s);return o._c=!1,o},ei=(e,t,s)=>{const o=e._ctx;for(const r in e){if(Zo(r))continue;const n=e[r];if(F(n))t[r]=ma(r,n,o);else if(n!=null){const i=Xo(n);t[r]=()=>i}}},ti=(e,t)=>{const s=Xo(t);e.slots.default=()=>s},si=(e,t,s)=>{for(const o in t)(s||!Zo(o))&&(e[o]=t[o])},ba=(e,t,s)=>{const o=e.slots=Yn();if(e.vnode.shapeFlag&32){const r=t.__;r&&wo(o,"__",r,!0);const n=t._;n?(si(o,t,s),s&&wo(o,"_",n,!0)):ei(t,o)}else t&&ti(e,t)},va=(e,t,s)=>{const{vnode:o,slots:r}=e;let n=!0,i=B;if(o.shapeFlag&32){const l=t._;l?s&&l===1?n=!1:si(r,t,s):(n=!t.$stable,ei(t,r)),i=t}else t&&(ti(e,t),i={default:1});if(n)for(const l in r)!Zo(l)&&i[l]==null&&delete r[l]},ke=Oa;function _a(e){return ya(e)}function ya(e,t){const s=Gs();s.__VUE__=!0;const{insert:o,remove:r,patchProp:n,createElement:i,createText:l,createComment:a,setText:c,setElementText:u,parentNode:h,nextSibling:p,setScopeId:g=We,insertStaticContent:b}=e,v=(f,d,m,w=null,_=null,y=null,P=void 0,k=null,E=!!d.dynamicChildren)=>{if(f===d)return;f&&!Wt(f,d)&&(w=ys(f),$e(f,_,y,!0),f=null),d.patchFlag===-2&&(E=!1,d.dynamicChildren=null);const{type:S,ref:I,shapeFlag:M}=d;switch(S){case Xs:R(f,d,m,w);break;case dt:T(f,d,m,w);break;case uo:f==null&&C(d,m,w,P);break;case Ne:Qe(f,d,m,w,_,y,P,k,E);break;default:M&1?K(f,d,m,w,_,y,P,k,E):M&6?vs(f,d,m,w,_,y,P,k,E):(M&64||M&128)&&S.process(f,d,m,w,_,y,P,k,E,Vt)}I!=null&&_?ts(I,f&&f.ref,y,d||f,!d):I==null&&f&&f.ref!=null&&ts(f.ref,null,y,f,!0)},R=(f,d,m,w)=>{if(f==null)o(d.el=l(d.children),m,w);else{const _=d.el=f.el;d.children!==f.children&&c(_,d.children)}},T=(f,d,m,w)=>{f==null?o(d.el=a(d.children||""),m,w):d.el=f.el},C=(f,d,m,w)=>{[f.el,f.anchor]=b(f.children,d,m,w,f.el,f.anchor)},O=({el:f,anchor:d},m,w)=>{let _;for(;f&&f!==d;)_=p(f),o(f,m,w),f=_;o(d,m,w)},x=({el:f,anchor:d})=>{let m;for(;f&&f!==d;)m=p(f),r(f),f=m;r(d)},K=(f,d,m,w,_,y,P,k,E)=>{d.type==="svg"?P="svg":d.type==="math"&&(P="mathml"),f==null?de(d,m,w,_,y,P,k,E):Fe(f,d,_,y,P,k,E)},de=(f,d,m,w,_,y,P,k)=>{let E,S;const{props:I,shapeFlag:M,transition:A,dirs:N}=f;if(E=f.el=i(f.type,y,I&&I.is,I),M&8?u(E,f.children):M&16&&q(f.children,E,null,w,_,co(f,y),P,k),N&&yt(f,null,w,"created"),X(E,f,f.scopeId,P,w),I){for(const G in I)G!=="value"&&!Zt(G)&&n(E,G,null,I[G],y,w);"value"in I&&n(E,"value",null,I.value,y),(S=I.onVnodeBeforeMount)&&je(S,w,f)}N&&yt(f,null,w,"beforeMount");const H=wa(_,A);H&&A.beforeEnter(E),o(E,d,m),((S=I&&I.onVnodeMounted)||H||N)&&ke(()=>{S&&je(S,w,f),H&&A.enter(E),N&&yt(f,null,w,"mounted")},_)},X=(f,d,m,w,_)=>{if(m&&g(f,m),w)for(let y=0;y<w.length;y++)g(f,w[y]);if(_){let y=_.subTree;if(d===y||ai(y.type)&&(y.ssContent===d||y.ssFallback===d)){const P=_.vnode;X(f,P,P.scopeId,P.slotScopeIds,_.parent)}}},q=(f,d,m,w,_,y,P,k,E=0)=>{for(let S=E;S<f.length;S++){const I=f[S]=k?at(f[S]):Be(f[S]);v(null,I,d,m,w,_,y,P,k)}},Fe=(f,d,m,w,_,y,P)=>{const k=d.el=f.el;let{patchFlag:E,dynamicChildren:S,dirs:I}=d;E|=f.patchFlag&16;const M=f.props||B,A=d.props||B;let N;if(m&&wt(m,!1),(N=A.onVnodeBeforeUpdate)&&je(N,m,d,f),I&&yt(d,f,m,"beforeUpdate"),m&&wt(m,!0),(M.innerHTML&&A.innerHTML==null||M.textContent&&A.textContent==null)&&u(k,""),S?se(f.dynamicChildren,S,k,m,w,co(d,_),y):P||W(f,d,k,null,m,w,co(d,_),y,!1),E>0){if(E&16)le(k,M,A,m,_);else if(E&2&&M.class!==A.class&&n(k,"class",null,A.class,_),E&4&&n(k,"style",M.style,A.style,_),E&8){const H=d.dynamicProps;for(let G=0;G<H.length;G++){const U=H[G],_e=M[U],ye=A[U];(ye!==_e||U==="value")&&n(k,U,_e,ye,_,m)}}E&1&&f.children!==d.children&&u(k,d.children)}else!P&&S==null&&le(k,M,A,m,_);((N=A.onVnodeUpdated)||I)&&ke(()=>{N&&je(N,m,d,f),I&&yt(d,f,m,"updated")},w)},se=(f,d,m,w,_,y,P)=>{for(let k=0;k<d.length;k++){const E=f[k],S=d[k],I=E.el&&(E.type===Ne||!Wt(E,S)||E.shapeFlag&198)?h(E.el):m;v(E,S,I,null,w,_,y,P,!0)}},le=(f,d,m,w,_)=>{if(d!==m){if(d!==B)for(const y in d)!Zt(y)&&!(y in m)&&n(f,y,d[y],null,_,w);for(const y in m){if(Zt(y))continue;const P=m[y],k=d[y];P!==k&&y!=="value"&&n(f,y,k,P,_,w)}"value"in m&&n(f,"value",d.value,m.value,_)}},Qe=(f,d,m,w,_,y,P,k,E)=>{const S=d.el=f?f.el:l(""),I=d.anchor=f?f.anchor:l("");let{patchFlag:M,dynamicChildren:A,slotScopeIds:N}=d;N&&(k=k?k.concat(N):N),f==null?(o(S,m,w),o(I,m,w),q(d.children||[],m,I,_,y,P,k,E)):M>0&&M&64&&A&&f.dynamicChildren?(se(f.dynamicChildren,A,m,_,y,P,k),(d.key!=null||_&&d===_.subTree)&&oi(f,d,!0)):W(f,d,m,I,_,y,P,k,E)},vs=(f,d,m,w,_,y,P,k,E)=>{d.slotScopeIds=k,f==null?d.shapeFlag&512?_.ctx.activate(d,m,w,P,E):to(d,m,w,_,y,P,E):dr(f,d,E)},to=(f,d,m,w,_,y,P)=>{const k=f.component=qa(f,w,_);if(Vn(f)&&(k.ctx.renderer=Vt),ja(k,!1,P),k.asyncDep){if(_&&_.registerDep(k,pe,P),!f.el){const E=k.subTree=De(dt);T(null,E,d,m),f.placeholder=E.el}}else pe(k,f,d,m,_,y,P)},dr=(f,d,m)=>{const w=d.component=f.component;if(Aa(f,d,m))if(w.asyncDep&&!w.asyncResolved){Y(w,d,m);return}else w.next=d,w.update();else d.el=f.el,w.vnode=d},pe=(f,d,m,w,_,y,P)=>{const k=()=>{if(f.isMounted){let{next:M,bu:A,u:N,parent:H,vnode:G}=f;{const qe=ri(f);if(qe){M&&(M.el=G.el,Y(f,M,P)),qe.asyncDep.then(()=>{f.isUnmounted||k()});return}}let U=M,_e;wt(f,!1),M?(M.el=G.el,Y(f,M,P)):M=G,A&&ks(A),(_e=M.props&&M.props.onVnodeBeforeUpdate)&&je(_e,H,M,G),wt(f,!0);const ye=Tr(f),Ke=f.subTree;f.subTree=ye,v(Ke,ye,h(Ke.el),ys(Ke),f,_,y),M.el=ye.el,U===null&&Ia(f,ye.el),N&&ke(N,_),(_e=M.props&&M.props.onVnodeUpdated)&&ke(()=>je(_e,H,M,G),_)}else{let M;const{el:A,props:N}=d,{bm:H,m:G,parent:U,root:_e,type:ye}=f,Ke=ss(d);wt(f,!1),H&&ks(H),!Ke&&(M=N&&N.onVnodeBeforeMount)&&je(M,U,d),wt(f,!0);{_e.ce&&_e.ce._def.shadowRoot!==!1&&_e.ce._injectChildStyle(ye);const qe=f.subTree=Tr(f);v(null,qe,m,w,f,_,y),d.el=qe.el}if(G&&ke(G,_),!Ke&&(M=N&&N.onVnodeMounted)){const qe=d;ke(()=>je(M,U,qe),_)}(d.shapeFlag&256||U&&ss(U.vnode)&&U.vnode.shapeFlag&256)&&f.a&&ke(f.a,_),f.isMounted=!0,d=m=w=null}};f.scope.on();const E=f.effect=new _n(k);f.scope.off();const S=f.update=E.run.bind(E),I=f.job=E.runIfDirty.bind(E);I.i=f,I.id=f.uid,E.scheduler=()=>zo(I),wt(f,!0),S()},Y=(f,d,m)=>{d.component=f;const w=f.vnode.props;f.vnode=d,f.next=null,pa(f,d.props,w,m),va(f,d.children,m),tt(),Sr(f),st()},W=(f,d,m,w,_,y,P,k,E=!1)=>{const S=f&&f.children,I=f?f.shapeFlag:0,M=d.children,{patchFlag:A,shapeFlag:N}=d;if(A>0){if(A&128){_s(S,M,m,w,_,y,P,k,E);return}else if(A&256){vt(S,M,m,w,_,y,P,k,E);return}}N&8?(I&16&&jt(S,_,y),M!==S&&u(m,M)):I&16?N&16?_s(S,M,m,w,_,y,P,k,E):jt(S,_,y,!0):(I&8&&u(m,""),N&16&&q(M,m,w,_,y,P,k,E))},vt=(f,d,m,w,_,y,P,k,E)=>{f=f||Lt,d=d||Lt;const S=f.length,I=d.length,M=Math.min(S,I);let A;for(A=0;A<M;A++){const N=d[A]=E?at(d[A]):Be(d[A]);v(f[A],N,m,null,_,y,P,k,E)}S>I?jt(f,_,y,!0,!1,M):q(d,m,w,_,y,P,k,E,M)},_s=(f,d,m,w,_,y,P,k,E)=>{let S=0;const I=d.length;let M=f.length-1,A=I-1;for(;S<=M&&S<=A;){const N=f[S],H=d[S]=E?at(d[S]):Be(d[S]);if(Wt(N,H))v(N,H,m,null,_,y,P,k,E);else break;S++}for(;S<=M&&S<=A;){const N=f[M],H=d[A]=E?at(d[A]):Be(d[A]);if(Wt(N,H))v(N,H,m,null,_,y,P,k,E);else break;M--,A--}if(S>M){if(S<=A){const N=A+1,H=N<I?d[N].el:w;for(;S<=A;)v(null,d[S]=E?at(d[S]):Be(d[S]),m,H,_,y,P,k,E),S++}}else if(S>A)for(;S<=M;)$e(f[S],_,y,!0),S++;else{const N=S,H=S,G=new Map;for(S=H;S<=A;S++){const xe=d[S]=E?at(d[S]):Be(d[S]);xe.key!=null&&G.set(xe.key,S)}let U,_e=0;const ye=A-H+1;let Ke=!1,qe=0;const Ut=new Array(ye);for(S=0;S<ye;S++)Ut[S]=0;for(S=N;S<=M;S++){const xe=f[S];if(_e>=ye){$e(xe,_,y,!0);continue}let He;if(xe.key!=null)He=G.get(xe.key);else for(U=H;U<=A;U++)if(Ut[U-H]===0&&Wt(xe,d[U])){He=U;break}He===void 0?$e(xe,_,y,!0):(Ut[He-H]=S+1,He>=qe?qe=He:Ke=!0,v(xe,d[He],m,null,_,y,P,k,E),_e++)}const mr=Ke?Sa(Ut):Lt;for(U=mr.length-1,S=ye-1;S>=0;S--){const xe=H+S,He=d[xe],br=d[xe+1],vr=xe+1<I?br.el||br.placeholder:w;Ut[S]===0?v(null,He,m,vr,_,y,P,k,E):Ke&&(U<0||S!==mr[U]?_t(He,m,vr,2):U--)}}},_t=(f,d,m,w,_=null)=>{const{el:y,type:P,transition:k,children:E,shapeFlag:S}=f;if(S&6){_t(f.component.subTree,d,m,w);return}if(S&128){f.suspense.move(d,m,w);return}if(S&64){P.move(f,d,m,Vt);return}if(P===Ne){o(y,d,m);for(let M=0;M<E.length;M++)_t(E[M],d,m,w);o(f.anchor,d,m);return}if(P===uo){O(f,d,m);return}if(w!==2&&S&1&&k)if(w===0)k.beforeEnter(y),o(y,d,m),ke(()=>k.enter(y),_);else{const{leave:M,delayLeave:A,afterLeave:N}=k,H=()=>{f.ctx.isUnmounted?r(y):o(y,d,m)},G=()=>{M(y,()=>{H(),N&&N()})};A?A(y,H,G):G()}else o(y,d,m)},$e=(f,d,m,w=!1,_=!1)=>{const{type:y,props:P,ref:k,children:E,dynamicChildren:S,shapeFlag:I,patchFlag:M,dirs:A,cacheIndex:N}=f;if(M===-2&&(_=!1),k!=null&&(tt(),ts(k,null,m,f,!0),st()),N!=null&&(d.renderCache[N]=void 0),I&256){d.ctx.deactivate(f);return}const H=I&1&&A,G=!ss(f);let U;if(G&&(U=P&&P.onVnodeBeforeUnmount)&&je(U,d,f),I&6)Zi(f.component,m,w);else{if(I&128){f.suspense.unmount(m,w);return}H&&yt(f,null,d,"beforeUnmount"),I&64?f.type.remove(f,d,m,Vt,w):S&&!S.hasOnce&&(y!==Ne||M>0&&M&64)?jt(S,d,m,!1,!0):(y===Ne&&M&384||!_&&I&16)&&jt(E,d,m),w&&pr(f)}(G&&(U=P&&P.onVnodeUnmounted)||H)&&ke(()=>{U&&je(U,d,f),H&&yt(f,null,d,"unmounted")},m)},pr=f=>{const{type:d,el:m,anchor:w,transition:_}=f;if(d===Ne){Ji(m,w);return}if(d===uo){x(f);return}const y=()=>{r(m),_&&!_.persisted&&_.afterLeave&&_.afterLeave()};if(f.shapeFlag&1&&_&&!_.persisted){const{leave:P,delayLeave:k}=_,E=()=>P(m,y);k?k(f.el,y,E):E()}else y()},Ji=(f,d)=>{let m;for(;f!==d;)m=p(f),r(f),f=m;r(d)},Zi=(f,d,m)=>{const{bum:w,scope:_,job:y,subTree:P,um:k,m:E,a:S,parent:I,slots:{__:M}}=f;Mr(E),Mr(S),w&&ks(w),I&&L(M)&&M.forEach(A=>{I.renderCache[A]=void 0}),_.stop(),y&&(y.flags|=8,$e(P,f,d,m)),k&&ke(k,d),ke(()=>{f.isUnmounted=!0},d),d&&d.pendingBranch&&!d.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===d.pendingId&&(d.deps--,d.deps===0&&d.resolve())},jt=(f,d,m,w=!1,_=!1,y=0)=>{for(let P=y;P<f.length;P++)$e(f[P],d,m,w,_)},ys=f=>{if(f.shapeFlag&6)return ys(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const d=p(f.anchor||f.el),m=d&&d[Ul];return m?p(m):d};let so=!1;const gr=(f,d,m)=>{f==null?d._vnode&&$e(d._vnode,null,null,!0):v(d._vnode||null,f,d,null,null,null,m),d._vnode=f,so||(so=!0,Sr(),Kn(),so=!1)},Vt={p:v,um:$e,m:_t,r:pr,mt:to,mc:q,pc:W,pbc:se,n:ys,o:e};return{render:gr,hydrate:void 0,createApp:fa(gr)}}function co({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function wt({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function wa(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function oi(e,t,s=!1){const o=e.children,r=t.children;if(L(o)&&L(r))for(let n=0;n<o.length;n++){const i=o[n];let l=r[n];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[n]=at(r[n]),l.el=i.el),!s&&l.patchFlag!==-2&&oi(i,l)),l.type===Xs&&(l.el=i.el),l.type===dt&&!l.el&&(l.el=i.el)}}function Sa(e){const t=e.slice(),s=[0];let o,r,n,i,l;const a=e.length;for(o=0;o<a;o++){const c=e[o];if(c!==0){if(r=s[s.length-1],e[r]<c){t[o]=r,s.push(o);continue}for(n=0,i=s.length-1;n<i;)l=n+i>>1,e[s[l]]<c?n=l+1:i=l;c<e[s[n]]&&(n>0&&(t[o]=s[n-1]),s[n]=o)}}for(n=s.length,i=s[n-1];n-- >0;)s[n]=i,i=t[i];return s}function ri(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ri(t)}function Mr(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ca=Symbol.for("v-scx"),xa=()=>Ps(Ca);function Ms(e,t,s){return ni(e,t,s)}function ni(e,t,s=B){const{immediate:o,deep:r,flush:n,once:i}=s,l=he({},s),a=t&&o||!t&&n!=="post";let c;if(us){if(n==="sync"){const g=xa();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!a){const g=()=>{};return g.stop=We,g.resume=We,g.pause=We,g}}const u=be;l.call=(g,b,v)=>Ge(g,u,b,v);let h=!1;n==="post"?l.scheduler=g=>{ke(g,u&&u.suspense)}:n!=="sync"&&(h=!0,l.scheduler=(g,b)=>{b?g():zo(g)}),l.augmentJob=g=>{t&&(g.flags|=4),h&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const p=$l(e,t,l);return us&&(c?c.push(p):a&&p()),p}function Ea(e,t,s){const o=this.proxy,r=ee(e)?e.includes(".")?ii(o,e):()=>o[e]:e.bind(o,o);let n;F(t)?n=t:(n=t.handler,s=t);const i=ms(this),l=ni(r,n.bind(o),s);return i(),l}function ii(e,t){const s=t.split(".");return()=>{let o=e;for(let r=0;r<s.length&&o;r++)o=o[s[r]];return o}}const ka=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ft(t)}Modifiers`]||e[`${gt(t)}Modifiers`];function Pa(e,t,...s){if(e.isUnmounted)return;const o=e.vnode.props||B;let r=s;const n=t.startsWith("update:"),i=n&&ka(o,t.slice(7));i&&(i.trim&&(r=s.map(u=>ee(u)?u.trim():u)),i.number&&(r=s.map(So)));let l,a=o[l=oo(t)]||o[l=oo(ft(t))];!a&&n&&(a=o[l=oo(gt(t))]),a&&Ge(a,e,6,r);const c=o[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Ge(c,e,6,r)}}function li(e,t,s=!1){const o=t.emitsCache,r=o.get(e);if(r!==void 0)return r;const n=e.emits;let i={},l=!1;if(!F(e)){const a=c=>{const u=li(c,t,!0);u&&(l=!0,he(i,u))};!s&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!n&&!l?(Z(e)&&o.set(e,null),null):(L(n)?n.forEach(a=>i[a]=null):he(i,n),Z(e)&&o.set(e,i),i)}function Zs(e,t){return!e||!Us(t)?!1:(t=t.slice(2).replace(/Once$/,""),V(e,t[0].toLowerCase()+t.slice(1))||V(e,gt(t))||V(e,t))}function Tr(e){const{type:t,vnode:s,proxy:o,withProxy:r,propsOptions:[n],slots:i,attrs:l,emit:a,render:c,renderCache:u,props:h,data:p,setupState:g,ctx:b,inheritAttrs:v}=e,R=Ds(e);let T,C;try{if(s.shapeFlag&4){const x=r||o,K=x;T=Be(c.call(K,x,u,h,g,p,b)),C=l}else{const x=t;T=Be(x.length>1?x(h,{attrs:l,slots:i,emit:a}):x(h,null)),C=t.props?l:Ma(l)}}catch(x){rs.length=0,zs(x,e,1),T=De(dt)}let O=T;if(C&&v!==!1){const x=Object.keys(C),{shapeFlag:K}=O;x.length&&K&7&&(n&&x.some(Ko)&&(C=Ta(C,n)),O=Ht(O,C,!1,!0))}return s.dirs&&(O=Ht(O,null,!1,!0),O.dirs=O.dirs?O.dirs.concat(s.dirs):s.dirs),s.transition&&Yo(O,s.transition),T=O,Ds(R),T}const Ma=e=>{let t;for(const s in e)(s==="class"||s==="style"||Us(s))&&((t||(t={}))[s]=e[s]);return t},Ta=(e,t)=>{const s={};for(const o in e)(!Ko(o)||!(o.slice(9)in t))&&(s[o]=e[o]);return s};function Aa(e,t,s){const{props:o,children:r,component:n}=e,{props:i,children:l,patchFlag:a}=t,c=n.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&a>=0){if(a&1024)return!0;if(a&16)return o?Ar(o,i,c):!!i;if(a&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const p=u[h];if(i[p]!==o[p]&&!Zs(c,p))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:o===i?!1:o?i?Ar(o,i,c):!0:!!i;return!1}function Ar(e,t,s){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let r=0;r<o.length;r++){const n=o[r];if(t[n]!==e[n]&&!Zs(s,n))return!0}return!1}function Ia({vnode:e,parent:t},s){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=s,t=t.parent;else break}}const ai=e=>e.__isSuspense;function Oa(e,t){t&&t.pendingBranch?L(e)?t.effects.push(...e):t.effects.push(e):Hl(e)}const Ne=Symbol.for("v-fgt"),Xs=Symbol.for("v-txt"),dt=Symbol.for("v-cmt"),uo=Symbol.for("v-stc"),rs=[];let Me=null;function ne(e=!1){rs.push(Me=e?null:[])}function Ra(){rs.pop(),Me=rs[rs.length-1]||null}let cs=1;function Ir(e,t=!1){cs+=e,e<0&&Me&&t&&(Me.hasOnce=!0)}function ci(e){return e.dynamicChildren=cs>0?Me||Lt:null,Ra(),cs>0&&Me&&Me.push(e),e}function ce(e,t,s,o,r,n){return ci(z(e,t,s,o,r,n,!0))}function ui(e,t,s,o,r){return ci(De(e,t,s,o,r,!0))}function fi(e){return e?e.__v_isVNode===!0:!1}function Wt(e,t){return e.type===t.type&&e.key===t.key}const hi=({key:e})=>e??null,Ts=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?ee(e)||fe(e)||F(e)?{i:Ie,r:e,k:t,f:!!s}:e:null);function z(e,t=null,s=null,o=0,r=null,n=e===Ne?0:1,i=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&hi(t),ref:t&&Ts(t),scopeId:Hn,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ie};return l?(er(a,s),n&128&&e.normalize(a)):s&&(a.shapeFlag|=ee(s)?8:16),cs>0&&!i&&Me&&(a.patchFlag>0||n&6)&&a.patchFlag!==32&&Me.push(a),a}const De=Na;function Na(e,t=null,s=null,o=0,r=null,n=!1){if((!e||e===oa)&&(e=dt),fi(e)){const l=Ht(e,t,!0);return s&&er(l,s),cs>0&&!n&&Me&&(l.shapeFlag&6?Me[Me.indexOf(e)]=l:Me.push(l)),l.patchFlag=-2,l}if(Wa(e)&&(e=e.__vccOpts),t){t=La(t);let{class:l,style:a}=t;l&&!ee(l)&&(t.class=ps(l)),Z(a)&&(Qo(a)&&!L(a)&&(a=he({},a)),t.style=Ft(a))}const i=ee(e)?1:ai(e)?128:Bl(e)?64:Z(e)?4:F(e)?2:0;return z(e,t,s,o,r,i,n,!0)}function La(e){return e?Qo(e)||Jn(e)?he({},e):e:null}function Ht(e,t,s=!1,o=!1){const{props:r,ref:n,patchFlag:i,children:l,transition:a}=e,c=t?Fa(r||{},t):r,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&hi(c),ref:t&&t.ref?s&&n?L(n)?n.concat(Ts(t)):[n,Ts(t)]:Ts(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ne?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ht(e.ssContent),ssFallback:e.ssFallback&&Ht(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&o&&Yo(u,a.clone(u)),u}function Da(e=" ",t=0){return De(Xs,null,e,t)}function As(e="",t=!1){return t?(ne(),ui(dt,null,e)):De(dt,null,e)}function Be(e){return e==null||typeof e=="boolean"?De(dt):L(e)?De(Ne,null,e.slice()):fi(e)?at(e):De(Xs,null,String(e))}function at(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ht(e)}function er(e,t){let s=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(L(t))s=16;else if(typeof t=="object")if(o&65){const r=t.default;r&&(r._c&&(r._d=!1),er(e,r()),r._c&&(r._d=!0));return}else{s=32;const r=t._;!r&&!Jn(t)?t._ctx=Ie:r===3&&Ie&&(Ie.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else F(t)?(t={default:t,_ctx:Ie},s=32):(t=String(t),o&64?(s=16,t=[Da(t)]):s=8);e.children=t,e.shapeFlag|=s}function Fa(...e){const t={};for(let s=0;s<e.length;s++){const o=e[s];for(const r in o)if(r==="class")t.class!==o.class&&(t.class=ps([t.class,o.class]));else if(r==="style")t.style=Ft([t.style,o.style]);else if(Us(r)){const n=t[r],i=o[r];i&&n!==i&&!(L(n)&&n.includes(i))&&(t[r]=n?[].concat(n,i):i)}else r!==""&&(t[r]=o[r])}return t}function je(e,t,s,o=null){Ge(e,t,7,[s,o])}const $a=Qn();let Ka=0;function qa(e,t,s){const o=e.type,r=(t?t.appContext:e.appContext)||$a,n={uid:Ka++,vnode:e,type:o,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ul(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Xn(o,r),emitsOptions:li(o,r),emit:null,emitted:null,propsDefaults:B,inheritAttrs:o.inheritAttrs,ctx:B,data:B,props:B,attrs:B,slots:B,refs:B,setupState:B,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=Pa.bind(null,n),e.ce&&e.ce(n),n}let be=null;const Ha=()=>be||Ie;let Ks,Io;{const e=Gs(),t=(s,o)=>{let r;return(r=e[s])||(r=e[s]=[]),r.push(o),n=>{r.length>1?r.forEach(i=>i(n)):r[0](n)}};Ks=t("__VUE_INSTANCE_SETTERS__",s=>be=s),Io=t("__VUE_SSR_SETTERS__",s=>us=s)}const ms=e=>{const t=be;return Ks(e),e.scope.on(),()=>{e.scope.off(),Ks(t)}},Or=()=>{be&&be.scope.off(),Ks(null)};function di(e){return e.vnode.shapeFlag&4}let us=!1;function ja(e,t=!1,s=!1){t&&Io(t);const{props:o,children:r}=e.vnode,n=di(e);da(e,o,n,t),ba(e,r,s||t);const i=n?Va(e,t):void 0;return t&&Io(!1),i}function Va(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ra);const{setup:o}=s;if(o){tt();const r=e.setupContext=o.length>1?Ba(e):null,n=ms(e),i=gs(o,e,0,[e.props,r]),l=hn(i);if(st(),n(),(l||e.sp)&&!ss(e)&&jn(e),l){if(i.then(Or,Or),t)return i.then(a=>{Rr(e,a)}).catch(a=>{zs(a,e,0)});e.asyncDep=i}else Rr(e,i)}else pi(e)}function Rr(e,t,s){F(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Z(t)&&(e.setupState=Ln(t)),pi(e)}function pi(e,t,s){const o=e.type;e.render||(e.render=o.render||We);{const r=ms(e);tt();try{na(e)}finally{st(),r()}}}const Ua={get(e,t){return ue(e,"get",""),e[t]}};function Ba(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,Ua),slots:e.slots,emit:e.emit,expose:t}}function eo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ln(Il(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in os)return os[s](e)},has(t,s){return s in t||s in os}})):e.proxy}function Wa(e){return F(e)&&"__vccOpts"in e}const gi=(e,t)=>Dl(e,t,us),Ga="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Oo;const Nr=typeof window<"u"&&window.trustedTypes;if(Nr)try{Oo=Nr.createPolicy("vue",{createHTML:e=>e})}catch{}const mi=Oo?e=>Oo.createHTML(e):e=>e,Qa="http://www.w3.org/2000/svg",za="http://www.w3.org/1998/Math/MathML",Je=typeof document<"u"?document:null,Lr=Je&&Je.createElement("template"),Ya={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,o)=>{const r=t==="svg"?Je.createElementNS(Qa,e):t==="mathml"?Je.createElementNS(za,e):s?Je.createElement(e,{is:s}):Je.createElement(e);return e==="select"&&o&&o.multiple!=null&&r.setAttribute("multiple",o.multiple),r},createText:e=>Je.createTextNode(e),createComment:e=>Je.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Je.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,o,r,n){const i=s?s.previousSibling:t.lastChild;if(r&&(r===n||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),s),!(r===n||!(r=r.nextSibling)););else{Lr.innerHTML=mi(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const l=Lr.content;if(o==="svg"||o==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,s)}return[i?i.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Ja=Symbol("_vtc");function Za(e,t,s){const o=e[Ja];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Dr=Symbol("_vod"),Xa=Symbol("_vsh"),ec=Symbol(""),tc=/(^|;)\s*display\s*:/;function sc(e,t,s){const o=e.style,r=ee(s);let n=!1;if(s&&!r){if(t)if(ee(t))for(const i of t.split(";")){const l=i.slice(0,i.indexOf(":")).trim();s[l]==null&&Is(o,l,"")}else for(const i in t)s[i]==null&&Is(o,i,"");for(const i in s)i==="display"&&(n=!0),Is(o,i,s[i])}else if(r){if(t!==s){const i=o[ec];i&&(s+=";"+i),o.cssText=s,n=tc.test(s)}}else t&&e.removeAttribute("style");Dr in e&&(e[Dr]=n?o.display:"",e[Xa]&&(o.display="none"))}const Fr=/\s*!important$/;function Is(e,t,s){if(L(s))s.forEach(o=>Is(e,t,o));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const o=oc(e,t);Fr.test(s)?e.setProperty(gt(o),s.replace(Fr,""),"important"):e[o]=s}}const $r=["Webkit","Moz","ms"],fo={};function oc(e,t){const s=fo[t];if(s)return s;let o=ft(t);if(o!=="filter"&&o in e)return fo[t]=o;o=gn(o);for(let r=0;r<$r.length;r++){const n=$r[r]+o;if(n in e)return fo[t]=n}return t}const Kr="http://www.w3.org/1999/xlink";function qr(e,t,s,o,r,n=cl(t)){o&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(Kr,t.slice(6,t.length)):e.setAttributeNS(Kr,t,s):s==null||n&&!mn(s)?e.removeAttribute(t):e.setAttribute(t,n?"":pt(s)?String(s):s)}function Hr(e,t,s,o,r){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?mi(s):s);return}const n=e.tagName;if(t==="value"&&n!=="PROGRESS"&&!n.includes("-")){const l=n==="OPTION"?e.getAttribute("value")||"":e.value,a=s==null?e.type==="checkbox"?"on":"":String(s);(l!==a||!("_value"in e))&&(e.value=a),s==null&&e.removeAttribute(t),e._value=s;return}let i=!1;if(s===""||s==null){const l=typeof e[t];l==="boolean"?s=mn(s):s==null&&l==="string"?(s="",i=!0):l==="number"&&(s=0,i=!0)}try{e[t]=s}catch{}i&&e.removeAttribute(r||t)}function Rt(e,t,s,o){e.addEventListener(t,s,o)}function rc(e,t,s,o){e.removeEventListener(t,s,o)}const jr=Symbol("_vei");function nc(e,t,s,o,r=null){const n=e[jr]||(e[jr]={}),i=n[t];if(o&&i)i.value=o;else{const[l,a]=ic(t);if(o){const c=n[t]=cc(o,r);Rt(e,l,c,a)}else i&&(rc(e,l,i,a),n[t]=void 0)}}const Vr=/(?:Once|Passive|Capture)$/;function ic(e){let t;if(Vr.test(e)){t={};let o;for(;o=e.match(Vr);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):gt(e.slice(2)),t]}let ho=0;const lc=Promise.resolve(),ac=()=>ho||(lc.then(()=>ho=0),ho=Date.now());function cc(e,t){const s=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=s.attached)return;Ge(uc(o,s.value),t,5,[o])};return s.value=e,s.attached=ac(),s}function uc(e,t){if(L(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(o=>r=>!r._stopped&&o&&o(r))}else return t}const Ur=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,fc=(e,t,s,o,r,n)=>{const i=r==="svg";t==="class"?Za(e,o,i):t==="style"?sc(e,s,o):Us(t)?Ko(t)||nc(e,t,s,o,n):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):hc(e,t,o,i))?(Hr(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&qr(e,t,o,i,n,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ee(o))?Hr(e,ft(t),o,n,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),qr(e,t,o,i))};function hc(e,t,s,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ur(t)&&F(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Ur(t)&&ee(s)?!1:t in e}const Br=e=>{const t=e.props["onUpdate:modelValue"]||!1;return L(t)?s=>ks(t,s):t};function dc(e){e.target.composing=!0}function Wr(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const po=Symbol("_assign"),pc={created(e,{modifiers:{lazy:t,trim:s,number:o}},r){e[po]=Br(r);const n=o||r.props&&r.props.type==="number";Rt(e,t?"change":"input",i=>{if(i.target.composing)return;let l=e.value;s&&(l=l.trim()),n&&(l=So(l)),e[po](l)}),s&&Rt(e,"change",()=>{e.value=e.value.trim()}),t||(Rt(e,"compositionstart",dc),Rt(e,"compositionend",Wr),Rt(e,"change",Wr))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:o,trim:r,number:n}},i){if(e[po]=Br(i),e.composing)return;const l=(n||e.type==="number")&&!/^0\d/.test(e.value)?So(e.value):e.value,a=t??"";l!==a&&(document.activeElement===e&&e.type!=="range"&&(o&&t===s||r&&e.value.trim()===a)||(e.value=a))}},gc={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},mc=(e,t)=>{const s=e._withKeys||(e._withKeys={}),o=t.join(".");return s[o]||(s[o]=r=>{if(!("key"in r))return;const n=gt(r.key);if(t.some(i=>i===n||gc[i]===n))return e(r)})},bc=he({patchProp:fc},Ya);let Gr;function vc(){return Gr||(Gr=_a(bc))}const _c=(...e)=>{const t=vc().createApp(...e),{mount:s}=t;return t.mount=o=>{const r=wc(o);if(!r)return;const n=t._component;!F(n)&&!n.render&&!n.template&&(n.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const i=s(r,!1,yc(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},t};function yc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function wc(e){return ee(e)?document.querySelector(e):e}const Sc={class:"promotion-dialog",open:""},Cc=["aria-label","onClick","onTouchstartPassive"],xc=Ys({__name:"PromotionDialog",props:{state:{}},emits:["promotionSelected"],setup(e,{emit:t}){const s=e,o=[{name:"Queen",data:"q"},{name:"Knight",data:"n"},{name:"Rook",data:"r"},{name:"Bishop",data:"b"}];function r(n){s.state.callback?.(n.data),t("promotionSelected")}return(n,i)=>(ne(),ce("dialog",Sc,[(ne(),ce(Ne,null,Bn(o,l=>z("button",{key:l.name,type:"button",class:ps([l.name.toLowerCase(),n.state.color]),"aria-label":l.name,onClick:a=>r(l),onTouchstartPassive:a=>r(l)},null,42,Cc)),64))]))}});/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const ae="w",Te="b",oe="p",Ro="n",Os="b",Jt="r",ct="q",re="k",go="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Ee=-1,Ec={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},kc=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"],$={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},D={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},mo={b:[16,32,17,15],w:[-16,-32,-17,-15]},Qr={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Pc=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Mc=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],Tc={p:1,n:2,b:4,r:8,q:16,k:32},Ac="pnbrqkPNBRQK",zr=[Ro,Os,Jt,ct],Ic=7,Oc=6,Rc=1,Nc=0,xs={[re]:$.KSIDE_CASTLE,[ct]:$.QSIDE_CASTLE},rt={w:[{square:D.a1,flag:$.QSIDE_CASTLE},{square:D.h1,flag:$.KSIDE_CASTLE}],b:[{square:D.a8,flag:$.QSIDE_CASTLE},{square:D.h8,flag:$.KSIDE_CASTLE}]},Lc={b:Rc,w:Oc},Dc=["1-0","0-1","1/2-1/2","*"];function Pt(e){return e>>4}function fs(e){return e&15}function bi(e){return"0123456789".indexOf(e)!==-1}function Pe(e){const t=fs(e),s=Pt(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(s,s+1)}function Gt(e){return e===ae?Te:ae}function Fc(e){const t=e.split(/\s+/);if(t.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const s=parseInt(t[5],10);if(isNaN(s)||s<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const o=parseInt(t[4],10);if(isNaN(o)||o<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const r=t[0].split("/");if(r.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let i=0;i<r.length;i++){let l=0,a=!1;for(let c=0;c<r[i].length;c++)if(bi(r[i][c])){if(a)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(r[i][c],10),a=!0}else{if(!/^[prnbqkPRNBQK]$/.test(r[i][c]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,a=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(t[3][1]=="3"&&t[1]=="w"||t[3][1]=="6"&&t[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const n=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:i,regex:l}of n){if(!l.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${i} king`};if((t[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${i} kings`}}return{ok:!0}}function $c(e,t){const s=e.from,o=e.to,r=e.piece;let n=0,i=0,l=0;for(let a=0,c=t.length;a<c;a++){const u=t[a].from,h=t[a].to,p=t[a].piece;r===p&&s!==u&&o===h&&(n++,Pt(s)===Pt(u)&&i++,fs(s)===fs(u)&&l++)}return n>0?i>0&&l>0?Pe(s):l>0?Pe(s).charAt(1):Pe(s).charAt(0):""}function nt(e,t,s,o,r,n=void 0,i=$.NORMAL){const l=Pt(o);if(r===oe&&(l===Ic||l===Nc))for(let a=0;a<zr.length;a++){const c=zr[a];e.push({color:t,from:s,to:o,piece:r,captured:n,promotion:c,flags:i|$.PROMOTION})}else e.push({color:t,from:s,to:o,piece:r,captured:n,flags:i})}function Yr(e){let t=e.charAt(0);return t>="a"&&t<="h"?e.match(/[a-h]\d.*[a-h]\d/)?void 0:oe:(t=t.toLowerCase(),t==="o"?re:t)}function bo(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Kc{_board=new Array(128);_turn=ae;_header={};_kings={w:Ee,b:Ee};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};constructor(t=go){this.load(t)}clear(t=!1){this._board=new Array(128),this._kings={w:Ee,b:Ee},this._turn=ae,this._castling={w:0,b:0},this._epSquare=Ee,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=t?this._header:{},this._updateSetup(this.fen())}removeHeader(t){t in this._header&&delete this._header[t]}load(t,s=!1){let o=t.split(/\s+/);if(o.length>=2&&o.length<6){const a=["-","-","0","1"];t=o.concat(a.slice(-(6-o.length))).join(" ")}o=t.split(/\s+/);const{ok:r,error:n}=Fc(t);if(!r)throw new Error(n);const i=o[0];let l=0;this.clear(s);for(let a=0;a<i.length;a++){const c=i.charAt(a);if(c==="/")l+=8;else if(bi(c))l+=parseInt(c,10);else{const u=c<"a"?ae:Te;this.put({type:c.toLowerCase(),color:u},Pe(l)),l++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=$.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=$.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=$.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=$.QSIDE_CASTLE),this._epSquare=o[3]==="-"?Ee:D[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._updateSetup(this.fen())}fen(){let t=0,s="";for(let n=D.a8;n<=D.h1;n++){if(this._board[n]){t>0&&(s+=t,t=0);const{color:i,type:l}=this._board[n];s+=i===ae?l.toUpperCase():l.toLowerCase()}else t++;n+1&136&&(t>0&&(s+=t),n!==D.h1&&(s+="/"),t=0,n+=8)}let o="";this._castling[ae]&$.KSIDE_CASTLE&&(o+="K"),this._castling[ae]&$.QSIDE_CASTLE&&(o+="Q"),this._castling[Te]&$.KSIDE_CASTLE&&(o+="k"),this._castling[Te]&$.QSIDE_CASTLE&&(o+="q"),o=o||"-";let r="-";if(this._epSquare!==Ee){const n=this._epSquare+(this._turn===ae?16:-16),i=[n+1,n-1];for(const l of i){if(l&136)continue;const a=this._turn;if(this._board[l]?.color===a&&this._board[l]?.type===oe){this._makeMove({color:a,from:l,to:this._epSquare,piece:oe,captured:oe,flags:$.EP_CAPTURE});const c=!this._isKingAttacked(a);if(this._undoMove(),c){r=Pe(this._epSquare);break}}}}return[s,this._turn,o,r,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(t){this._history.length>0||(t!==go?(this._header.SetUp="1",this._header.FEN=t):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(go)}get(t){return this._board[D[t]]||!1}put({type:t,color:s},o){if(Ac.indexOf(t.toLowerCase())===-1||!(o in D))return!1;const r=D[o];return t==re&&!(this._kings[s]==Ee||this._kings[s]==r)?!1:(this._board[r]={type:t,color:s},t===re&&(this._kings[s]=r),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}remove(t){const s=this.get(t);return delete this._board[D[t]],s&&s.type===re&&(this._kings[s.color]=Ee),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),s}_updateCastlingRights(){const t=this._board[D.e1]?.type===re&&this._board[D.e1]?.color===ae,s=this._board[D.e8]?.type===re&&this._board[D.e8]?.color===Te;(!t||this._board[D.a1]?.type!==Jt||this._board[D.a1]?.color!==ae)&&(this._castling.w&=-65),(!t||this._board[D.h1]?.type!==Jt||this._board[D.h1]?.color!==ae)&&(this._castling.w&=-33),(!s||this._board[D.a8]?.type!==Jt||this._board[D.a8]?.color!==Te)&&(this._castling.b&=-65),(!s||this._board[D.h8]?.type!==Jt||this._board[D.h8]?.color!==Te)&&(this._castling.b&=-33)}_updateEnPassantSquare(){if(this._epSquare===Ee)return;const t=this._epSquare+(this._turn===ae?-16:16),s=this._epSquare+(this._turn===ae?16:-16),o=[s+1,s-1];if(this._board[t]!==null||this._board[this._epSquare]!==null||this._board[s]?.color!==Gt(this._turn)||this._board[s]?.type!==oe){this._epSquare=Ee;return}const r=n=>!(n&136)&&this._board[n]?.color===this._turn&&this._board[n]?.type===oe;o.some(r)||(this._epSquare=Ee)}_attacked(t,s){for(let o=D.a8;o<=D.h1;o++){if(o&136){o+=7;continue}if(this._board[o]===void 0||this._board[o].color!==t)continue;const r=this._board[o],n=o-s;if(n===0)continue;const i=n+119;if(Pc[i]&Tc[r.type]){if(r.type===oe){if(n>0){if(r.color===ae)return!0}else if(r.color===Te)return!0;continue}if(r.type==="n"||r.type==="k")return!0;const l=Mc[i];let a=o+l,c=!1;for(;a!==s;){if(this._board[a]!=null){c=!0;break}a+=l}if(!c)return!0}}return!1}_isKingAttacked(t){const s=this._kings[t];return s===-1?!1:this._attacked(Gt(t),s)}isAttacked(t,s){return this._attacked(s,D[t])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const t={b:0,n:0,r:0,q:0,k:0,p:0},s=[];let o=0,r=0;for(let n=D.a8;n<=D.h1;n++){if(r=(r+1)%2,n&136){n+=7;continue}const i=this._board[n];i&&(t[i.type]=i.type in t?t[i.type]+1:1,i.type===Os&&s.push(r),o++)}if(o===2||o===3&&(t[Os]===1||t[Ro]===1))return!0;if(o===t[Os]+2){let n=0;const i=s.length;for(let l=0;l<i;l++)n+=s[l];if(n===0||n===i)return!0}return!1}isThreefoldRepetition(){const t=[],s={};let o=!1;for(;;){const r=this._undoMove();if(!r)break;t.push(r)}for(;;){const r=this.fen().split(" ").slice(0,4).join(" ");s[r]=r in s?s[r]+1:1,s[r]>=3&&(o=!0);const n=t.pop();if(n)this._makeMove(n);else break}return o}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:t=!1,square:s=void 0,piece:o=void 0}={}){const r=this._moves({square:s,piece:o});return t?r.map(n=>this._makePretty(n)):r.map(n=>this._moveToSan(n,r))}_moves({legal:t=!0,piece:s=void 0,square:o=void 0}={}){const r=o?o.toLowerCase():void 0,n=s?.toLowerCase(),i=[],l=this._turn,a=Gt(l);let c=D.a8,u=D.h1,h=!1;if(r)if(r in D)c=u=D[r],h=!0;else return[];for(let g=c;g<=u;g++){if(g&136){g+=7;continue}if(!this._board[g]||this._board[g].color===a)continue;const{type:b}=this._board[g];let v;if(b===oe){if(n&&n!==b)continue;v=g+mo[l][0],this._board[v]||(nt(i,l,g,v,oe),v=g+mo[l][1],Lc[l]===Pt(g)&&!this._board[v]&&nt(i,l,g,v,oe,void 0,$.BIG_PAWN));for(let R=2;R<4;R++)v=g+mo[l][R],!(v&136)&&(this._board[v]?.color===a?nt(i,l,g,v,oe,this._board[v].type,$.CAPTURE):v===this._epSquare&&nt(i,l,g,v,oe,oe,$.EP_CAPTURE))}else{if(n&&n!==b)continue;for(let R=0,T=Qr[b].length;R<T;R++){const C=Qr[b][R];for(v=g;v+=C,!(v&136);){if(!this._board[v])nt(i,l,g,v,b);else{if(this._board[v].color===l)break;nt(i,l,g,v,b,this._board[v].type,$.CAPTURE);break}if(b===Ro||b===re)break}}}}if((n===void 0||n===re)&&(!h||u===this._kings[l])){if(this._castling[l]&$.KSIDE_CASTLE){const g=this._kings[l],b=g+2;!this._board[g+1]&&!this._board[b]&&!this._attacked(a,this._kings[l])&&!this._attacked(a,g+1)&&!this._attacked(a,b)&&nt(i,l,this._kings[l],b,re,void 0,$.KSIDE_CASTLE)}if(this._castling[l]&$.QSIDE_CASTLE){const g=this._kings[l],b=g-2;!this._board[g-1]&&!this._board[g-2]&&!this._board[g-3]&&!this._attacked(a,this._kings[l])&&!this._attacked(a,g-1)&&!this._attacked(a,b)&&nt(i,l,this._kings[l],b,re,void 0,$.QSIDE_CASTLE)}}if(!t||this._kings[l]===-1)return i;const p=[];for(let g=0,b=i.length;g<b;g++)this._makeMove(i[g]),this._isKingAttacked(l)||p.push(i[g]),this._undoMove();return p}move(t,{strict:s=!1}={}){let o=null;if(typeof t=="string")o=this._moveFromSan(t,s);else if(typeof t=="object"){const n=this._moves();for(let i=0,l=n.length;i<l;i++)if(t.from===Pe(n[i].from)&&t.to===Pe(n[i].to)&&(!("promotion"in n[i])||t.promotion===n[i].promotion)){o=n[i];break}}if(!o)throw typeof t=="string"?new Error(`Invalid move: ${t}`):new Error(`Invalid move: ${JSON.stringify(t)}`);const r=this._makePretty(o);return this._makeMove(o),r}_push(t){this._history.push({move:t,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(t){const s=this._turn,o=Gt(s);if(this._push(t),this._board[t.to]=this._board[t.from],delete this._board[t.from],t.flags&$.EP_CAPTURE&&(this._turn===Te?delete this._board[t.to-16]:delete this._board[t.to+16]),t.promotion&&(this._board[t.to]={type:t.promotion,color:s}),this._board[t.to].type===re){if(this._kings[s]=t.to,t.flags&$.KSIDE_CASTLE){const r=t.to-1,n=t.to+1;this._board[r]=this._board[n],delete this._board[n]}else if(t.flags&$.QSIDE_CASTLE){const r=t.to+1,n=t.to-2;this._board[r]=this._board[n],delete this._board[n]}this._castling[s]=0}if(this._castling[s]){for(let r=0,n=rt[s].length;r<n;r++)if(t.from===rt[s][r].square&&this._castling[s]&rt[s][r].flag){this._castling[s]^=rt[s][r].flag;break}}if(this._castling[o]){for(let r=0,n=rt[o].length;r<n;r++)if(t.to===rt[o][r].square&&this._castling[o]&rt[o][r].flag){this._castling[o]^=rt[o][r].flag;break}}t.flags&$.BIG_PAWN?s===Te?this._epSquare=t.to-16:this._epSquare=t.to+16:this._epSquare=Ee,t.piece===oe?this._halfMoves=0:t.flags&($.CAPTURE|$.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,s===Te&&this._moveNumber++,this._turn=o}undo(){const t=this._undoMove();return t?this._makePretty(t):null}_undoMove(){const t=this._history.pop();if(t===void 0)return null;const s=t.move;this._kings=t.kings,this._turn=t.turn,this._castling=t.castling,this._epSquare=t.epSquare,this._halfMoves=t.halfMoves,this._moveNumber=t.moveNumber;const o=this._turn,r=Gt(o);if(this._board[s.from]=this._board[s.to],this._board[s.from].type=s.piece,delete this._board[s.to],s.captured)if(s.flags&$.EP_CAPTURE){let n;o===Te?n=s.to-16:n=s.to+16,this._board[n]={type:oe,color:r}}else this._board[s.to]={type:s.captured,color:r};if(s.flags&($.KSIDE_CASTLE|$.QSIDE_CASTLE)){let n,i;s.flags&$.KSIDE_CASTLE?(n=s.to+1,i=s.to-1):(n=s.to-2,i=s.to+1),this._board[n]=this._board[i],delete this._board[i]}return s}pgn({newline:t=`
`,maxWidth:s=0}={}){const o=[];let r=!1;for(const p in this._header)o.push("["+p+' "'+this._header[p]+'"]'+t),r=!0;r&&this._history.length&&o.push(t);const n=p=>{const g=this._comments[this.fen()];if(typeof g<"u"){const b=p.length>0?" ":"";p=`${p}${b}{${g}}`}return p},i=[];for(;this._history.length>0;)i.push(this._undoMove());const l=[];let a="";for(i.length===0&&l.push(n(""));i.length>0;){a=n(a);const p=i.pop();if(!p)break;if(!this._history.length&&p.color==="b"){const g=`${this._moveNumber}. ...`;a=a?`${a} ${g}`:g}else p.color==="w"&&(a.length&&l.push(a),a=this._moveNumber+".");a=a+" "+this._moveToSan(p,this._moves({legal:!0})),this._makeMove(p)}if(a.length&&l.push(n(a)),typeof this._header.Result<"u"&&l.push(this._header.Result),s===0)return o.join("")+l.join(" ");const c=function(){return o.length>0&&o[o.length-1]===" "?(o.pop(),!0):!1},u=function(p,g){for(const b of g.split(" "))if(b){if(p+b.length>s){for(;c();)p--;o.push(t),p=0}o.push(b),p+=b.length,o.push(" "),p++}return c()&&p--,p};let h=0;for(let p=0;p<l.length;p++){if(h+l[p].length>s&&l[p].includes("{")){h=u(h,l[p]);continue}h+l[p].length>s&&p!==0?(o[o.length-1]===" "&&o.pop(),o.push(t),h=0):p!==0&&(o.push(" "),h++),o.push(l[p]),h+=l[p].length}return o.join("")}header(...t){for(let s=0;s<t.length;s+=2)typeof t[s]=="string"&&typeof t[s+1]=="string"&&(this._header[t[s]]=t[s+1]);return this._header}loadPgn(t,{strict:s=!1,newlineChar:o=`\r?
`}={}){function r(C){return C.replace(/\\/g,"\\")}function n(C){const O={},x=C.split(new RegExp(r(o)));let K="",de="";for(let X=0;X<x.length;X++){const q=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;K=x[X].replace(q,"$1"),de=x[X].replace(q,"$2"),K.trim().length>0&&(O[K]=de)}return O}t=t.trim();const i=new RegExp("^(\\[((?:"+r(o)+")|.)*\\])((?:\\s*"+r(o)+"){2}|(?:\\s*"+r(o)+")*$)").exec(t),l=i&&i.length>=2?i[1]:"";this.reset();const a=n(l);let c="";for(const C in a)C.toLowerCase()==="fen"&&(c=a[C]),this.header(C,a[C]);if(!s)c&&this.load(c,!0);else if(a.SetUp==="1"){if(!("FEN"in a))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(a.FEN,!0)}function u(C){return Array.from(C).map(function(O){return O.charCodeAt(0)<128?O.charCodeAt(0).toString(16):encodeURIComponent(O).replace(/%/g,"").toLowerCase()}).join("")}function h(C){return C.length==0?"":decodeURIComponent("%"+(C.match(/.{1,2}/g)||[]).join("%"))}const p=function(C){return C=C.replace(new RegExp(r(o),"g")," "),`{${u(C.slice(1,C.length-1))}}`},g=function(C){if(C.startsWith("{")&&C.endsWith("}"))return h(C.slice(1,C.length-1))};let b=t.replace(l,"").replace(new RegExp(`({[^}]*})+?|;([^${r(o)}]*)`,"g"),function(C,O,x){return O!==void 0?p(O):" "+p(`{${x.slice(1)}}`)}).replace(new RegExp(r(o),"g")," ");const v=/(\([^()]+\))+?/g;for(;v.test(b);)b=b.replace(v,"");b=b.replace(/\d+\.(\.\.)?/g,""),b=b.replace(/\.\.\./g,""),b=b.replace(/\$\d+/g,"");let R=b.trim().split(new RegExp(/\s+/));R=R.filter(C=>C!=="");let T="";for(let C=0;C<R.length;C++){const O=g(R[C]);if(O!==void 0){this._comments[this.fen()]=O;continue}const x=this._moveFromSan(R[C],s);if(x==null)if(Dc.indexOf(R[C])>-1)T=R[C];else throw new Error(`Invalid move in PGN: ${R[C]}`);else T="",this._makeMove(x)}T&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",T)}_moveToSan(t,s){let o="";if(t.flags&$.KSIDE_CASTLE)o="O-O";else if(t.flags&$.QSIDE_CASTLE)o="O-O-O";else{if(t.piece!==oe){const r=$c(t,s);o+=t.piece.toUpperCase()+r}t.flags&($.CAPTURE|$.EP_CAPTURE)&&(t.piece===oe&&(o+=Pe(t.from)[0]),o+="x"),o+=Pe(t.to),t.promotion&&(o+="="+t.promotion.toUpperCase())}return this._makeMove(t),this.isCheck()&&(this.isCheckmate()?o+="#":o+="+"),this._undoMove(),o}_moveFromSan(t,s=!1){const o=bo(t);let r=Yr(o),n=this._moves({legal:!0,piece:r});for(let p=0,g=n.length;p<g;p++)if(o===bo(this._moveToSan(n[p],n)))return n[p];if(s)return null;let i,l,a,c,u,h=!1;if(l=o.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(i=l[1],a=l[2],c=l[3],u=l[4],a.length==1&&(h=!0)):(l=o.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(i=l[1],a=l[2],c=l[3],u=l[4],a.length==1&&(h=!0))),r=Yr(o),n=this._moves({legal:!0,piece:i||r}),!c)return null;for(let p=0,g=n.length;p<g;p++)if(a){if((!i||i.toLowerCase()==n[p].piece)&&D[a]==n[p].from&&D[c]==n[p].to&&(!u||u.toLowerCase()==n[p].promotion))return n[p];if(h){const b=Pe(n[p].from);if((!i||i.toLowerCase()==n[p].piece)&&D[c]==n[p].to&&(a==b[0]||a==b[1])&&(!u||u.toLowerCase()==n[p].promotion))return n[p]}}else if(o===bo(this._moveToSan(n[p],n)).replace("x",""))return n[p];return null}ascii(){let t=`   +------------------------+
`;for(let s=D.a8;s<=D.h1;s++){if(fs(s)===0&&(t+=" "+"87654321"[Pt(s)]+" |"),this._board[s]){const o=this._board[s].type,r=this._board[s].color===ae?o.toUpperCase():o.toLowerCase();t+=" "+r+" "}else t+=" . ";s+1&136&&(t+=`|
`,s+=8)}return t+=`   +------------------------+
`,t+="     a  b  c  d  e  f  g  h",t}perft(t){const s=this._moves({legal:!1});let o=0;const r=this._turn;for(let n=0,i=s.length;n<i;n++)this._makeMove(s[n]),this._isKingAttacked(r)||(t-1>0?o+=this.perft(t-1):o++),this._undoMove();return o}_makePretty(t){const{color:s,piece:o,from:r,to:n,flags:i,captured:l,promotion:a}=t;let c="";for(const g in $)$[g]&i&&(c+=Ec[g]);const u=Pe(r),h=Pe(n),p={color:s,piece:o,from:u,to:h,san:this._moveToSan(t,this._moves({legal:!0})),flags:c,lan:u+h,before:this.fen(),after:""};return this._makeMove(t),p.after=this.fen(),this._undoMove(),l&&(p.captured=l),a&&(p.promotion=a,p.lan+=a),p}turn(){return this._turn}board(){const t=[];let s=[];for(let o=D.a8;o<=D.h1;o++)this._board[o]==null?s.push(null):s.push({square:Pe(o),type:this._board[o].type,color:this._board[o].color}),o+1&136&&(t.push(s),s=[],o+=8);return t}squareColor(t){if(t in D){const s=D[t];return(Pt(s)+fs(s))%2===0?"light":"dark"}return null}history({verbose:t=!1}={}){const s=[],o=[];for(;this._history.length>0;)s.push(this._undoMove());for(;;){const r=s.pop();if(!r)break;t?o.push(this._makePretty(r)):o.push(this._moveToSan(r,this._moves())),this._makeMove(r)}return o}_pruneComments(){const t=[],s={},o=r=>{r in this._comments&&(s[r]=this._comments[r])};for(;this._history.length>0;)t.push(this._undoMove());for(o(this.fen());;){const r=t.pop();if(!r)break;this._makeMove(r),o(this.fen())}this._comments=s}getComment(){return this._comments[this.fen()]}setComment(t){this._comments[this.fen()]=t.replace("{","[").replace("}","]")}deleteComment(){const t=this._comments[this.fen()];return delete this._comments[this.fen()],t}getComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>({fen:t,comment:this._comments[t]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(t=>{const s=this._comments[t];return delete this._comments[t],{fen:t,comment:s}})}setCastlingRights(t,s){for(const r of[re,ct])s[r]!==void 0&&(s[r]?this._castling[t]|=xs[r]:this._castling[t]&=~xs[r]);this._updateCastlingRights();const o=this.getCastlingRights(t);return(s[re]===void 0||s[re]===o[re])&&(s[ct]===void 0||s[ct]===o[ct])}getCastlingRights(t){return{[re]:(this._castling[t]&xs[re])!==0,[ct]:(this._castling[t]&xs[ct])!==0}}moveNumber(){return this._moveNumber}}function qc(e){const t=[];for(const s of e)t.push({orig:s.to,brush:"yellow"}),s.captured&&t.push({orig:s.from,dest:s.to,brush:"red"}),s.san.includes("+")&&t.push({orig:s.from,dest:s.to,brush:"blue"});return t}function Es(e){return e==="w"?"white":"black"}function Jr(e){const t=new Map;for(const s of kc){const o=e.moves({square:s,verbose:!0});o.length&&t.set(o[0].from,o.map(r=>r.to))}return t}function Hc(e,t){if(t?.type!=="p")return!1;const s=t?.color==="w"?"8":"1";return e[1]===s}function hs(e){return!!e&&e instanceof Object&&!(e instanceof Array)&&!(e instanceof Function)}function qs(e){return hs(e)?Object.fromEntries(Object.entries(e).map(([t,s])=>[t,qs(s)])):e}function vi(e,t){const s={...e,...t};for(const o in s)s[o]=hs(e?.[o])&&hs(t?.[o])?vi(e[o],t[o]):qs(s[o]);return s}function _i(e,t){const s={};for(const o in t)if(hs(e?.[o])&&hs(t?.[o])){const r=_i(e[o],t[o]);Object.keys(r).length>0&&(s[o]=r)}else e?.[o]!==t[o]&&(s[o]=t[o]);return s}const jc={p:"pawn",n:"knight",b:"bishop",r:"rook",q:"queen",k:"king"},Vc=new Map([["b1",["a3","c3"]],["g1",["f3","h3"]],["a2",["a3","a4"]],["b2",["b3","b4"]],["c2",["c3","c4"]],["d2",["d3","d4"]],["e2",["e3","e4"]],["f2",["f3","f4"]],["g2",["g3","g4"]],["h2",["h3","h4"]]]),Uc="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Bc={fen:Uc,orientation:"white",turnColor:"white",coordinates:!1,autoCastle:!0,viewOnly:!1,disableContextMenu:!1,addPieceZIndex:!1,blockTouchScroll:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:300},lastMove:void 0,movable:{free:!1,color:"white",showDests:!0,dests:Vc,events:{after:()=>{},afterNewPiece:void 0},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{set:void 0,unset:void 0}},predroppable:{enabled:!1,events:{set:void 0,unset:void 0}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},selectable:{enabled:!0},events:{change:void 0,move:void 0,dropNewPiece:void 0,select:void 0,insert:void 0},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}}}},Wc=["white","black"],tr=["a","b","c","d","e","f","g","h"],sr=["1","2","3","4","5","6","7","8"],Gc=[...sr].reverse(),or=Array.prototype.concat(...tr.map(e=>sr.map(t=>e+t))),Ae=e=>or[8*e[0]+e[1]],J=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],yi=or.map(J);function Qc(e){let t;const s=()=>(t===void 0&&(t=e()),t);return s.clear=()=>{t=void 0},s}const zc=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;const t=performance.now()-e;return e=void 0,t}}},rr=e=>e==="white"?"black":"white",ds=(e,t)=>{const s=e[0]-t[0],o=e[1]-t[1];return s*s+o*o},No=(e,t)=>e.role===t.role&&e.color===t.color,bs=e=>(t,s)=>[(s?t[0]:7-t[0])*e.width/8,(s?7-t[1]:t[1])*e.height/8],Ue=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`},wi=(e,t,s=1)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px) scale(${s})`},nr=(e,t)=>{e.style.visibility=t?"visible":"hidden"},Tt=e=>{var t;if(e.clientX||e.clientX===0)return[e.clientX,e.clientY];if(!((t=e.targetTouches)===null||t===void 0)&&t[0])return[e.targetTouches[0].clientX,e.targetTouches[0].clientY]},Si=e=>e.buttons===2||e.button===2,et=(e,t)=>{const s=document.createElement(e);return t&&(s.className=t),s};function Ci(e,t,s){const o=J(e);return t||(o[0]=7-o[0],o[1]=7-o[1]),[s.left+s.width*o[0]/8+s.width/16,s.top+s.height*(7-o[1])/8+s.height/16]}const Mt=(e,t)=>Math.abs(e-t),Yc=e=>(t,s,o,r)=>Mt(t,o)<2&&(e==="white"?r===s+1||s<=1&&r===s+2&&t===o:r===s-1||s>=6&&r===s-2&&t===o),xi=(e,t,s,o)=>{const r=Mt(e,s),n=Mt(t,o);return r===1&&n===2||r===2&&n===1},Ei=(e,t,s,o)=>Mt(e,s)===Mt(t,o),ki=(e,t,s,o)=>e===s||t===o,Pi=(e,t,s,o)=>Ei(e,t,s,o)||ki(e,t,s,o),Jc=(e,t,s)=>(o,r,n,i)=>Mt(o,n)<2&&Mt(r,i)<2||s&&r===i&&r===(e==="white"?0:7)&&(o===4&&(n===2&&t.includes(0)||n===6&&t.includes(7))||t.includes(n));function Zc(e,t){const s=t==="white"?"1":"8",o=[];for(const[r,n]of e)r[1]===s&&n.color===t&&n.role==="rook"&&o.push(J(r)[0]);return o}function Mi(e,t,s){const o=e.get(t);if(!o)return[];const r=J(t),n=o.role,i=n==="pawn"?Yc(o.color):n==="knight"?xi:n==="bishop"?Ei:n==="rook"?ki:n==="queen"?Pi:Jc(o.color,Zc(e,o.color),s);return yi.filter(l=>(r[0]!==l[0]||r[1]!==l[1])&&i(r[0],r[1],l[0],l[1])).map(Ae)}function Se(e,...t){e&&setTimeout(()=>e(...t),1)}function Xc(e){e.orientation=rr(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0}function eu(e,t){for(const[s,o]of t)o?e.pieces.set(s,o):e.pieces.delete(s)}function tu(e,t){if(e.check=void 0,t===!0&&(t=e.turnColor),t)for(const[s,o]of e.pieces)o.role==="king"&&o.color===t&&(e.check=s)}function su(e,t,s,o){bt(e),e.premovable.current=[t,s],Se(e.premovable.events.set,t,s,o)}function mt(e){e.premovable.current&&(e.premovable.current=void 0,Se(e.premovable.events.unset))}function ou(e,t,s){mt(e),e.predroppable.current={role:t,key:s},Se(e.predroppable.events.set,t,s)}function bt(e){const t=e.predroppable;t.current&&(t.current=void 0,Se(t.events.unset))}function ru(e,t,s){if(!e.autoCastle)return!1;const o=e.pieces.get(t);if(!o||o.role!=="king")return!1;const r=J(t),n=J(s);if(r[1]!==0&&r[1]!==7||r[1]!==n[1])return!1;r[0]===4&&!e.pieces.has(s)&&(n[0]===6?s=Ae([7,n[1]]):n[0]===2&&(s=Ae([0,n[1]])));const i=e.pieces.get(s);return!i||i.color!==o.color||i.role!=="rook"?!1:(e.pieces.delete(t),e.pieces.delete(s),r[0]<n[0]?(e.pieces.set(Ae([6,n[1]]),o),e.pieces.set(Ae([5,n[1]]),i)):(e.pieces.set(Ae([2,n[1]]),o),e.pieces.set(Ae([3,n[1]]),i)),!0)}function Ti(e,t,s){const o=e.pieces.get(t),r=e.pieces.get(s);if(t===s||!o)return!1;const n=r&&r.color!==o.color?r:void 0;return s===e.selected&&Re(e),Se(e.events.move,t,s,n),ru(e,t,s)||(e.pieces.set(s,o),e.pieces.delete(t)),e.lastMove=[t,s],e.check=void 0,Se(e.events.change),n||!0}function ir(e,t,s,o){if(e.pieces.has(s))if(o)e.pieces.delete(s);else return!1;return Se(e.events.dropNewPiece,t,s),e.pieces.set(s,t),e.lastMove=[s],e.check=void 0,Se(e.events.change),e.movable.dests=void 0,e.turnColor=rr(e.turnColor),!0}function Ai(e,t,s){const o=Ti(e,t,s);return o&&(e.movable.dests=void 0,e.turnColor=rr(e.turnColor),e.animation.current=void 0),o}function Ii(e,t,s){if(lr(e,t,s)){const o=Ai(e,t,s);if(o){const r=e.hold.stop();Re(e);const n={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:r};return o!==!0&&(n.captured=o),Se(e.movable.events.after,t,s,n),!0}}else if(iu(e,t,s))return su(e,t,s,{ctrlKey:e.stats.ctrlKey}),Re(e),!0;return Re(e),!1}function Oi(e,t,s,o){const r=e.pieces.get(t);r&&(nu(e,t,s)||o)?(e.pieces.delete(t),ir(e,r,s,o),Se(e.movable.events.afterNewPiece,r.role,s,{premove:!1,predrop:!1})):r&&lu(e,t,s)?ou(e,r.role,s):(mt(e),bt(e)),e.pieces.delete(t),Re(e)}function Lo(e,t,s){if(Se(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled){Re(e),e.hold.cancel();return}else if((e.selectable.enabled||s)&&e.selected!==t&&Ii(e,e.selected,t)){e.stats.dragged=!1;return}}(e.selectable.enabled||e.draggable.enabled)&&(Ni(e,t)||ar(e,t))&&(Ri(e,t),e.hold.start())}function Ri(e,t){e.selected=t,ar(e,t)?e.premovable.customDests||(e.premovable.dests=Mi(e.pieces,t,e.premovable.castle)):e.premovable.dests=void 0}function Re(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function Ni(e,t){const s=e.pieces.get(t);return!!s&&(e.movable.color==="both"||e.movable.color===s.color&&e.turnColor===s.color)}const lr=(e,t,s)=>{var o,r;return t!==s&&Ni(e,t)&&(e.movable.free||!!(!((r=(o=e.movable.dests)===null||o===void 0?void 0:o.get(t))===null||r===void 0)&&r.includes(s)))};function nu(e,t,s){const o=e.pieces.get(t);return!!o&&(t===s||!e.pieces.has(s))&&(e.movable.color==="both"||e.movable.color===o.color&&e.turnColor===o.color)}function ar(e,t){const s=e.pieces.get(t);return!!s&&e.premovable.enabled&&e.movable.color===s.color&&e.turnColor!==s.color}function iu(e,t,s){var o,r;const n=(r=(o=e.premovable.customDests)===null||o===void 0?void 0:o.get(t))!==null&&r!==void 0?r:Mi(e.pieces,t,e.premovable.castle);return t!==s&&ar(e,t)&&n.includes(s)}function lu(e,t,s){const o=e.pieces.get(t),r=e.pieces.get(s);return!!o&&(!r||r.color!==e.movable.color)&&e.predroppable.enabled&&(o.role!=="pawn"||s[1]!=="1"&&s[1]!=="8")&&e.movable.color===o.color&&e.turnColor!==o.color}function au(e,t){const s=e.pieces.get(t);return!!s&&e.draggable.enabled&&(e.movable.color==="both"||e.movable.color===s.color&&(e.turnColor===s.color||e.premovable.enabled))}function cu(e){const t=e.premovable.current;if(!t)return!1;const s=t[0],o=t[1];let r=!1;if(lr(e,s,o)){const n=Ai(e,s,o);if(n){const i={premove:!0};n!==!0&&(i.captured=n),Se(e.movable.events.after,s,o,i),r=!0}}return mt(e),r}function uu(e,t){const s=e.predroppable.current;let o=!1;if(!s)return!1;if(t(s)){const r={role:s.role,color:e.movable.color};ir(e,r,s.key)&&(Se(e.movable.events.afterNewPiece,s.role,s.key,{premove:!1,predrop:!0}),o=!0)}return bt(e),o}function cr(e){mt(e),bt(e),Re(e)}function Zr(e){e.movable.color=e.movable.dests=e.animation.current=void 0,cr(e)}function At(e,t,s){let o=Math.floor(8*(e[0]-s.left)/s.width);t||(o=7-o);let r=7-Math.floor(8*(e[1]-s.top)/s.height);return t||(r=7-r),o>=0&&o<8&&r>=0&&r<8?Ae([o,r]):void 0}function fu(e,t,s,o){const r=J(e),n=yi.filter(a=>Pi(r[0],r[1],a[0],a[1])||xi(r[0],r[1],a[0],a[1])),i=n.map(a=>Ci(Ae(a),s,o)).map(a=>ds(t,a)),[,l]=i.reduce((a,c,u)=>a[0]<c?a:[c,u],[i[0],0]);return Ae(n[l])}const Ce=e=>e.orientation==="white",Li="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",hu={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},du={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};function Di(e){e==="start"&&(e=Li);const t=new Map;let s=7,o=0;for(const r of e)switch(r){case" ":case"[":return t;case"/":if(--s,s<0)return t;o=0;break;case"~":{const n=t.get(Ae([o-1,s]));n&&(n.promoted=!0);break}default:{const n=r.charCodeAt(0);if(n<57)o+=n-48;else{const i=r.toLowerCase();t.set(Ae([o,s]),{role:hu[i],color:r===i?"black":"white"}),++o}}}return t}function pu(e){return Gc.map(t=>tr.map(s=>{const o=e.get(s+t);if(o){let r=du[o.role];return o.color==="white"&&(r=r.toUpperCase()),o.promoted&&(r+="~"),r}else return"1"}).join("")).join("/").replace(/1{2,}/g,t=>t.length.toString())}function Fi(e,t){t.animation&&(ur(e.animation,t.animation),(e.animation.duration||0)<70&&(e.animation.enabled=!1))}function $i(e,t){var s,o,r;if(!((s=t.movable)===null||s===void 0)&&s.dests&&(e.movable.dests=void 0),!((o=t.drawable)===null||o===void 0)&&o.autoShapes&&(e.drawable.autoShapes=[]),ur(e,t),t.fen&&(e.pieces=Di(t.fen),e.drawable.shapes=((r=t.drawable)===null||r===void 0?void 0:r.shapes)||[]),"check"in t&&tu(e,t.check||!1),"lastMove"in t&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&Ri(e,e.selected),Fi(e,t),!e.movable.rookCastle&&e.movable.dests){const n=e.movable.color==="white"?"1":"8",i="e"+n,l=e.movable.dests.get(i),a=e.pieces.get(i);if(!l||!a||a.role!=="king")return;e.movable.dests.set(i,l.filter(c=>!(c==="a"+n&&l.includes("c"+n))&&!(c==="h"+n&&l.includes("g"+n))))}}function ur(e,t){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(Object.prototype.hasOwnProperty.call(e,s)&&Xr(e[s])&&Xr(t[s])?ur(e[s],t[s]):e[s]=t[s])}function Xr(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||t===null}const xt=(e,t)=>t.animation.enabled?bu(e,t):it(e,t);function it(e,t){const s=e(t);return t.dom.redraw(),s}const vo=(e,t)=>({key:e,pos:J(e),piece:t}),gu=(e,t)=>t.sort((s,o)=>ds(e.pos,s.pos)-ds(e.pos,o.pos))[0];function mu(e,t){const s=new Map,o=[],r=new Map,n=[],i=[],l=new Map;let a,c,u;for(const[h,p]of e)l.set(h,vo(h,p));for(const h of or)a=t.pieces.get(h),c=l.get(h),a?c?No(a,c.piece)||(n.push(c),i.push(vo(h,a))):i.push(vo(h,a)):c&&n.push(c);for(const h of i)c=gu(h,n.filter(p=>No(h.piece,p.piece))),c&&(u=[c.pos[0]-h.pos[0],c.pos[1]-h.pos[1]],s.set(h.key,u.concat(u)),o.push(c.key));for(const h of n)o.includes(h.key)||r.set(h.key,h.piece);return{anims:s,fadings:r}}function Ki(e,t){const s=e.animation.current;if(s===void 0){e.dom.destroyed||e.dom.redrawNow();return}const o=1-(t-s.start)*s.frequency;if(o<=0)e.animation.current=void 0,e.dom.redrawNow();else{const r=vu(o);for(const n of s.plan.anims.values())n[2]=n[0]*r,n[3]=n[1]*r;e.dom.redrawNow(!0),requestAnimationFrame((n=performance.now())=>Ki(e,n))}}function bu(e,t){const s=new Map(t.pieces),o=e(t),r=mu(s,t);if(r.anims.size||r.fadings.size){const n=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:r},n||Ki(t,performance.now())}else t.dom.redraw();return o}const vu=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,_u=["green","red","blue","yellow"];function yu(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?Re(e):cr(e);const s=Tt(t),o=At(s,Ce(e),e.dom.bounds());o&&(e.drawable.current={orig:o,pos:s,brush:xu(t),snapToValidMove:e.drawable.defaultSnapToValidMove},qi(e))}function qi(e){requestAnimationFrame(()=>{const t=e.drawable.current;if(t){const s=At(t.pos,Ce(e),e.dom.bounds());s||(t.snapToValidMove=!1);const o=t.snapToValidMove?fu(t.orig,t.pos,Ce(e),e.dom.bounds()):s;o!==t.mouseSq&&(t.mouseSq=o,t.dest=o!==t.orig?o:void 0,e.dom.redrawNow()),qi(e)}})}function wu(e,t){e.drawable.current&&(e.drawable.current.pos=Tt(t))}function Su(e){const t=e.drawable.current;t&&(t.mouseSq&&Eu(e.drawable,t),Hi(e))}function Hi(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function Cu(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),ji(e.drawable))}function xu(e){var t;const s=(e.shiftKey||e.ctrlKey)&&Si(e),o=e.altKey||e.metaKey||((t=e.getModifierState)===null||t===void 0?void 0:t.call(e,"AltGraph"));return _u[(s?1:0)+(o?2:0)]}function Eu(e,t){const s=r=>r.orig===t.orig&&r.dest===t.dest,o=e.shapes.find(s);o&&(e.shapes=e.shapes.filter(r=>!s(r))),(!o||o.brush!==t.brush)&&e.shapes.push({orig:t.orig,dest:t.dest,brush:t.brush}),ji(e)}function ji(e){e.onChange&&e.onChange(e.shapes)}function ku(e,t){if(!(e.trustAllEvents||t.isTrusted)||t.button!==void 0&&t.button!==0||t.touches&&t.touches.length>1)return;const s=e.dom.bounds(),o=Tt(t),r=At(o,Ce(e),s);if(!r)return;const n=e.pieces.get(r),i=e.selected;if(!i&&e.drawable.enabled&&(e.drawable.eraseOnClick||!n||n.color!==e.turnColor)&&Cu(e),t.cancelable!==!1&&(!t.touches||e.blockTouchScroll||n||i||Pu(e,o)))t.preventDefault();else if(t.touches)return;const l=!!e.premovable.current,a=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&lr(e,e.selected,r)?xt(h=>Lo(h,r),e):Lo(e,r);const c=e.selected===r,u=Ui(e,r);if(n&&u&&c&&au(e,r)){e.draggable.current={orig:r,piece:n,origPos:o,pos:o,started:e.draggable.autoDistance&&e.stats.dragged,element:u,previouslySelected:i,originTarget:t.target,keyHasChanged:!1},u.cgDragging=!0,u.classList.add("dragging");const h=e.dom.elements.ghost;h&&(h.className=`ghost ${n.color} ${n.role}`,Ue(h,bs(s)(J(r),Ce(e))),nr(h,!0)),fr(e)}else l&&mt(e),a&&bt(e);e.dom.redraw()}function Pu(e,t){const s=Ce(e),o=e.dom.bounds(),r=Math.pow(o.width/8,2);for(const n of e.pieces.keys()){const i=Ci(n,s,o);if(ds(i,t)<=r)return!0}return!1}function Mu(e,t,s,o){e.pieces.set("a0",t),e.dom.redraw();const n=Tt(s);e.draggable.current={orig:"a0",piece:t,origPos:n,pos:n,started:!0,element:()=>Ui(e,"a0"),originTarget:s.target,newPiece:!0,force:!!o,keyHasChanged:!1},fr(e)}function fr(e){requestAnimationFrame(()=>{var t;const s=e.draggable.current;if(!s)return;!((t=e.animation.current)===null||t===void 0)&&t.plan.anims.has(s.orig)&&(e.animation.current=void 0);const o=e.pieces.get(s.orig);if(!o||!No(o,s.piece))Hs(e);else if(!s.started&&ds(s.pos,s.origPos)>=Math.pow(e.draggable.distance,2)&&(s.started=!0),s.started){if(typeof s.element=="function"){const n=s.element();if(!n)return;n.cgDragging=!0,n.classList.add("dragging"),s.element=n}const r=e.dom.bounds();Ue(s.element,[s.pos[0]-r.left-r.width/16,s.pos[1]-r.top-r.height/16]),s.keyHasChanged||(s.keyHasChanged=s.orig!==At(s.pos,Ce(e),r))}fr(e)})}function Tu(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.pos=Tt(t))}function Au(e,t){const s=e.draggable.current;if(!s)return;if(t.type==="touchend"&&t.cancelable!==!1&&t.preventDefault(),t.type==="touchend"&&s.originTarget!==t.target&&!s.newPiece){e.draggable.current=void 0;return}mt(e),bt(e);const o=Tt(t)||s.pos,r=At(o,Ce(e),e.dom.bounds());r&&s.started&&s.orig!==r?s.newPiece?Oi(e,s.orig,r,s.force):(e.stats.ctrlKey=t.ctrlKey,Ii(e,s.orig,r)&&(e.stats.dragged=!0)):s.newPiece?e.pieces.delete(s.orig):e.draggable.deleteOnDropOff&&!r&&(e.pieces.delete(s.orig),Se(e.events.change)),(s.orig===s.previouslySelected||s.keyHasChanged)&&(s.orig===r||!r)?Re(e):e.selectable.enabled||Re(e),Vi(e),e.draggable.current=void 0,e.dom.redraw()}function Hs(e){const t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,Re(e),Vi(e),e.dom.redraw())}function Vi(e){const t=e.dom.elements;t.ghost&&nr(t.ghost,!1)}function Ui(e,t){let s=e.dom.elements.board.firstChild;for(;s;){if(s.cgKey===t&&s.tagName==="PIECE")return s;s=s.nextSibling}}function Iu(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout(()=>{en(e,2),setTimeout(()=>en(e,void 0),120)},120)}function en(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}function Ou(e,t){function s(){Xc(e),t()}return{set(o){o.orientation&&o.orientation!==e.orientation&&s(),Fi(e,o),(o.fen?xt:it)(r=>$i(r,o),e)},state:e,getFen:()=>pu(e.pieces),toggleOrientation:s,setPieces(o){xt(r=>eu(r,o),e)},selectSquare(o,r){o?xt(n=>Lo(n,o,r),e):e.selected&&(Re(e),e.dom.redraw())},move(o,r){xt(n=>Ti(n,o,r),e)},newPiece(o,r){xt(n=>ir(n,o,r),e)},playPremove(){if(e.premovable.current){if(xt(cu,e))return!0;e.dom.redraw()}return!1},playPredrop(o){if(e.predroppable.current){const r=uu(e,o);return e.dom.redraw(),r}return!1},cancelPremove(){it(mt,e)},cancelPredrop(){it(bt,e)},cancelMove(){it(o=>{cr(o),Hs(o)},e)},stop(){it(o=>{Zr(o),Hs(o)},e)},explode(o){Iu(e,o)},setAutoShapes(o){it(r=>r.drawable.autoShapes=o,e)},setShapes(o){it(r=>r.drawable.shapes=o,e)},getKeyAtDomPos(o){return At(o,Ce(e),e.dom.bounds())},redrawAll:t,dragNewPiece(o,r,n){Mu(e,o,r,n)},destroy(){Zr(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}function Ru(){return{pieces:Di(Li),orientation:"white",turnColor:"white",coordinates:!0,ranksPosition:"right",autoCastle:!0,viewOnly:!1,disableContextMenu:!1,addPieceZIndex:!1,blockTouchScroll:!1,pieceKey:!1,trustAllEvents:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15},purple:{key:"purp",color:"#68217a",opacity:.65,lineWidth:10},pink:{key:"pink",color:"#ee2080",opacity:.5,lineWidth:10},hilite:{key:"hilite",color:"#fff",opacity:1,lineWidth:1}},prevSvgHash:""},hold:zc()}}function Nu(){const e=te("defs"),t=ve(te("filter"),{id:"cg-filter-blur"});return t.appendChild(ve(te("feGaussianBlur"),{stdDeviation:"0.022"})),e.appendChild(t),e}function Lu(e,t,s){var o;const r=e.drawable,n=r.current,i=n&&n.mouseSq?n:void 0,l=new Map,a=e.dom.bounds(),c=r.autoShapes.filter(g=>!g.piece);for(const g of r.shapes.concat(c).concat(i?[i]:[])){if(!g.dest)continue;const b=(o=l.get(g.dest))!==null&&o!==void 0?o:new Set,v=Vs(js(J(g.orig),e.orientation),a),R=Vs(js(J(g.dest),e.orientation),a);b.add(Fo(v,R)),l.set(g.dest,b)}const u=r.shapes.concat(c).map(g=>({shape:g,current:!1,hash:tn(g,Do(g.dest,l),!1,a)}));i&&u.push({shape:i,current:!0,hash:tn(i,Do(i.dest,l),!0,a)});const h=u.map(g=>g.hash).join(";");if(h===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=h;const p=t.querySelector("defs");Du(r,u,p),Fu(u,t.querySelector("g"),s.querySelector("g"),g=>qu(e,g,r.brushes,l,a))}function Du(e,t,s){var o;const r=new Map;let n;for(const a of t.filter(c=>c.shape.dest&&c.shape.brush))n=Bi(e.brushes[a.shape.brush],a.shape.modifiers),!((o=a.shape.modifiers)===null||o===void 0)&&o.hilite&&r.set("hilite",e.brushes.hilite),r.set(n.key,n);const i=new Set;let l=s.firstElementChild;for(;l;)i.add(l.getAttribute("cgKey")),l=l.nextElementSibling;for(const[a,c]of r.entries())i.has(a)||s.appendChild(Vu(c))}function Fu(e,t,s,o){const r=new Map;for(const n of e)r.set(n.hash,!1);for(const n of[t,s]){const i=[];let l=n.firstElementChild,a;for(;l;)a=l.getAttribute("cgHash"),r.has(a)?r.set(a,!0):i.push(l),l=l.nextElementSibling;for(const c of i)n.removeChild(c)}for(const n of e.filter(i=>!r.get(i.hash)))for(const i of o(n))i.isCustom?s.appendChild(i.el):t.appendChild(i.el)}function tn({orig:e,dest:t,brush:s,piece:o,modifiers:r,customSvg:n,label:i},l,a,c){var u,h;return[c.width,c.height,a,e,t,s,l&&"-",o&&$u(o),r&&Ku(r),n&&`custom-${sn(n.html)},${(h=(u=n.center)===null||u===void 0?void 0:u[0])!==null&&h!==void 0?h:"o"}`,i&&`label-${sn(i.text)}`].filter(p=>p).join(",")}function $u(e){return[e.color,e.role,e.scale].filter(t=>t).join(",")}function Ku(e){return[e.lineWidth,e.hilite&&"*"].filter(t=>t).join(",")}function sn(e){let t=0;for(let s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s)>>>0;return t.toString()}function qu(e,{shape:t,current:s,hash:o},r,n,i){var l,a;const c=Vs(js(J(t.orig),e.orientation),i),u=t.dest?Vs(js(J(t.dest),e.orientation),i):c,h=t.brush&&Bi(r[t.brush],t.modifiers),p=n.get(t.dest),g=[];if(h){const b=ve(te("g"),{cgHash:o});g.push({el:b}),c[0]!==u[0]||c[1]!==u[1]?b.appendChild(ju(t,h,c,u,s,Do(t.dest,n))):b.appendChild(Hu(r[t.brush],c,s,i))}if(t.label){const b=t.label;(l=b.fill)!==null&&l!==void 0||(b.fill=t.brush&&r[t.brush].color);const v=t.brush?void 0:"tr";g.push({el:Uu(b,o,c,u,p,v),isCustom:!0})}if(t.customSvg){const b=(a=t.customSvg.center)!==null&&a!==void 0?a:"orig",[v,R]=b==="label"?Gi(c,u,p).map(C=>C-.5):b==="dest"?u:c,T=ve(te("g"),{transform:`translate(${v},${R})`,cgHash:o});T.innerHTML=`<svg width="1" height="1" viewBox="0 0 100 100">${t.customSvg.html}</svg>`,g.push({el:T,isCustom:!0})}return g}function Hu(e,t,s,o){const r=Bu(),n=(o.width+o.height)/(4*Math.max(o.width,o.height));return ve(te("circle"),{stroke:e.color,"stroke-width":r[s?0:1],fill:"none",opacity:Wi(e,s),cx:t[0],cy:t[1],r:n-r[1]/2})}function ju(e,t,s,o,r,n){var i;function l(u){var h;const p=Gu(n&&!r),g=o[0]-s[0],b=o[1]-s[1],v=Math.atan2(b,g),R=Math.cos(v)*p,T=Math.sin(v)*p;return ve(te("line"),{stroke:u?"white":t.color,"stroke-width":Wu(t,r)+(u?.04:0),"stroke-linecap":"round","marker-end":`url(#arrowhead-${u?"hilite":t.key})`,opacity:!((h=e.modifiers)===null||h===void 0)&&h.hilite?1:Wi(t,r),x1:s[0],y1:s[1],x2:o[0]-R,y2:o[1]-T})}if(!(!((i=e.modifiers)===null||i===void 0)&&i.hilite))return l(!1);const a=te("g"),c=ve(te("g"),{filter:"url(#cg-filter-blur)"});return c.appendChild(Qu(s,o)),c.appendChild(l(!0)),a.appendChild(c),a.appendChild(l(!1)),a}function Vu(e){const t=ve(te("marker"),{id:"arrowhead-"+e.key,orient:"auto",overflow:"visible",markerWidth:4,markerHeight:4,refX:e.key==="hilite"?1.86:2.05,refY:2});return t.appendChild(ve(te("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function Uu(e,t,s,o,r,n){var i;const l=.4*.75**e.text.length,a=Gi(s,o,r),c=n==="tr"?.4:0,u=ve(te("g"),{transform:`translate(${a[0]+c},${a[1]-c})`,cgHash:t});u.appendChild(ve(te("circle"),{r:.4/2,"fill-opacity":n?1:.8,"stroke-opacity":n?1:.7,"stroke-width":.03,fill:(i=e.fill)!==null&&i!==void 0?i:"#666",stroke:"white"}));const h=ve(te("text"),{"font-size":l,"font-family":"Noto Sans","text-anchor":"middle",fill:"white",y:.13*.75**e.text.length});return h.innerHTML=e.text,u.appendChild(h),u}function js(e,t){return t==="white"?e:[7-e[0],7-e[1]]}function Do(e,t){return(e&&t.has(e)&&t.get(e).size>1)===!0}function te(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ve(e,t){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.setAttribute(s,t[s]);return e}function Bi(e,t){return t?{color:e.color,opacity:Math.round(e.opacity*10)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter(s=>s).join("")}:e}function Bu(){return[3/64,4/64]}function Wu(e,t){return(e.lineWidth||10)*(t?.85:1)/64}function Wi(e,t){return(e.opacity||1)*(t?.9:1)}function Gu(e){return(e?20:10)/64}function Vs(e,t){const s=Math.min(1,t.width/t.height),o=Math.min(1,t.height/t.width);return[(e[0]-3.5)*s,(3.5-e[1])*o]}function Qu(e,t){const s={from:[Math.floor(Math.min(e[0],t[0])),Math.floor(Math.min(e[1],t[1]))],to:[Math.ceil(Math.max(e[0],t[0])),Math.ceil(Math.max(e[1],t[1]))]};return ve(te("rect"),{x:s.from[0],y:s.from[1],width:s.to[0]-s.from[0],height:s.to[1]-s.from[1],fill:"none",stroke:"none"})}function Fo(e,t,s=!0){const o=Math.atan2(t[1]-e[1],t[0]-e[0])+Math.PI;return s?(Math.round(o*8/Math.PI)+16)%16:o}function zu(e,t){return Math.sqrt([e[0]-t[0],e[1]-t[1]].reduce((s,o)=>s+o*o,0))}function Gi(e,t,s){let o=zu(e,t);const r=Fo(e,t,!1);if(s&&(o-=33/64,s.size>1)){o-=10/64;const n=Fo(e,t);(s.has((n+1)%16)||s.has((n+15)%16))&&n&1&&(o-=.4)}return[e[0]-Math.cos(r)*o,e[1]-Math.sin(r)*o].map(n=>n+.5)}function Yu(e,t){e.innerHTML="",e.classList.add("cg-wrap");for(const a of Wc)e.classList.toggle("orientation-"+a,t.orientation===a);e.classList.toggle("manipulable",!t.viewOnly);const s=et("cg-container");e.appendChild(s);const o=et("cg-board");s.appendChild(o);let r,n,i;if(t.drawable.visible&&(r=ve(te("svg"),{class:"cg-shapes",viewBox:"-4 -4 8 8",preserveAspectRatio:"xMidYMid slice"}),r.appendChild(Nu()),r.appendChild(te("g")),n=ve(te("svg"),{class:"cg-custom-svgs",viewBox:"-3.5 -3.5 8 8",preserveAspectRatio:"xMidYMid slice"}),n.appendChild(te("g")),i=et("cg-auto-pieces"),s.appendChild(r),s.appendChild(n),s.appendChild(i)),t.coordinates){const a=t.orientation==="black"?" black":"",c=t.ranksPosition==="left"?" left":"";s.appendChild(on(sr,"ranks"+a+c)),s.appendChild(on(tr,"files"+a))}let l;return t.draggable.enabled&&t.draggable.showGhost&&(l=et("piece","ghost"),nr(l,!1),s.appendChild(l)),{board:o,container:s,wrap:e,ghost:l,svg:r,customSvg:n,autoPieces:i}}function on(e,t){const s=et("coords",t);let o;for(const r of e)o=et("coord"),o.textContent=r,s.appendChild(o);return s}function Ju(e,t){if(!e.dropmode.active)return;mt(e),bt(e);const s=e.dropmode.piece;if(s){e.pieces.set("a0",s);const o=Tt(t),r=o&&At(o,Ce(e),e.dom.bounds());r&&Oi(e,"a0",r)}e.dom.redraw()}function Zu(e,t){const s=e.dom.elements.board;if("ResizeObserver"in window&&new ResizeObserver(t).observe(e.dom.elements.wrap),(e.disableContextMenu||e.drawable.enabled)&&s.addEventListener("contextmenu",r=>r.preventDefault()),e.viewOnly)return;const o=ef(e);s.addEventListener("touchstart",o,{passive:!1}),s.addEventListener("mousedown",o,{passive:!1})}function Xu(e,t){const s=[];if("ResizeObserver"in window||s.push(Qt(document.body,"chessground.resize",t)),!e.viewOnly){const o=rn(e,Tu,wu),r=rn(e,Au,Su);for(const i of["touchmove","mousemove"])s.push(Qt(document,i,o));for(const i of["touchend","mouseup"])s.push(Qt(document,i,r));const n=()=>e.dom.bounds.clear();s.push(Qt(document,"scroll",n,{capture:!0,passive:!0})),s.push(Qt(window,"resize",n,{passive:!0}))}return()=>s.forEach(o=>o())}function Qt(e,t,s,o){return e.addEventListener(t,s,o),()=>e.removeEventListener(t,s,o)}const ef=e=>t=>{e.draggable.current?Hs(e):e.drawable.current?Hi(e):t.shiftKey||Si(t)?e.drawable.enabled&&yu(e,t):e.viewOnly||(e.dropmode.active?Ju(e,t):ku(e,t))},rn=(e,t,s)=>o=>{e.drawable.current?e.drawable.enabled&&s(e,o):e.viewOnly||t(e,o)};function tf(e){const t=Ce(e),s=bs(e.dom.bounds()),o=e.dom.elements.board,r=e.pieces,n=e.animation.current,i=n?n.plan.anims:new Map,l=n?n.plan.fadings:new Map,a=e.draggable.current,c=of(e),u=new Set,h=new Set,p=new Map,g=new Map;let b,v,R,T,C,O,x,K,de,X;for(v=o.firstChild;v;){if(b=v.cgKey,Qi(v))if(R=r.get(b),C=i.get(b),O=l.get(b),T=v.cgPiece,v.cgDragging&&(!a||a.orig!==b)&&(v.classList.remove("dragging"),Ue(v,s(J(b),t)),v.cgDragging=!1),!O&&v.cgFading&&(v.cgFading=!1,v.classList.remove("fading")),R){if(C&&v.cgAnimating&&T===zt(R)){const q=J(b);q[0]+=C[2],q[1]+=C[3],v.classList.add("anim"),Ue(v,s(q,t))}else v.cgAnimating&&(v.cgAnimating=!1,v.classList.remove("anim"),Ue(v,s(J(b),t)),e.addPieceZIndex&&(v.style.zIndex=_o(J(b),t)));T===zt(R)&&(!O||!v.cgFading)?u.add(b):O&&T===zt(O)?(v.classList.add("fading"),v.cgFading=!0):yo(p,T,v)}else yo(p,T,v);else if(zi(v)){const q=v.className;c.get(b)===q?h.add(b):yo(g,q,v)}v=v.nextSibling}for(const[q,Fe]of c)if(!h.has(q)){de=g.get(Fe),X=de&&de.pop();const se=s(J(q),t);if(X)X.cgKey=q,Ue(X,se);else{const le=et("square",Fe);le.cgKey=q,Ue(le,se),o.insertBefore(le,o.firstChild)}}for(const[q,Fe]of r)if(C=i.get(q),!u.has(q))if(x=p.get(zt(Fe)),K=x&&x.pop(),K){K.cgKey=q,K.cgFading&&(K.classList.remove("fading"),K.cgFading=!1);const se=J(q);e.addPieceZIndex&&(K.style.zIndex=_o(se,t)),C&&(K.cgAnimating=!0,K.classList.add("anim"),se[0]+=C[2],se[1]+=C[3]),Ue(K,s(se,t))}else{const se=zt(Fe),le=et("piece",se),Qe=J(q);le.cgPiece=se,le.cgKey=q,C&&(le.cgAnimating=!0,Qe[0]+=C[2],Qe[1]+=C[3]),Ue(le,s(Qe,t)),e.addPieceZIndex&&(le.style.zIndex=_o(Qe,t)),o.appendChild(le)}for(const q of p.values())ln(e,q);for(const q of g.values())ln(e,q)}function sf(e){const t=Ce(e),s=bs(e.dom.bounds());let o=e.dom.elements.board.firstChild;for(;o;)(Qi(o)&&!o.cgAnimating||zi(o))&&Ue(o,s(J(o.cgKey),t)),o=o.nextSibling}function nn(e){var t,s;const o=e.dom.elements.wrap.getBoundingClientRect(),r=e.dom.elements.container,n=o.height/o.width,i=Math.floor(o.width*window.devicePixelRatio/8)*8/window.devicePixelRatio,l=i*n;r.style.width=i+"px",r.style.height=l+"px",e.dom.bounds.clear(),(t=e.addDimensionsCssVarsTo)===null||t===void 0||t.style.setProperty("--cg-width",i+"px"),(s=e.addDimensionsCssVarsTo)===null||s===void 0||s.style.setProperty("--cg-height",l+"px")}const Qi=e=>e.tagName==="PIECE",zi=e=>e.tagName==="SQUARE";function ln(e,t){for(const s of t)e.dom.elements.board.removeChild(s)}function _o(e,t){const s=e[1];return`${t?10-s:3+s}`}const zt=e=>`${e.color} ${e.role}`;function of(e){var t,s,o;const r=new Map;if(e.lastMove&&e.highlight.lastMove)for(const l of e.lastMove)Ye(r,l,"last-move");if(e.check&&e.highlight.check&&Ye(r,e.check,"check"),e.selected&&(Ye(r,e.selected,"selected"),e.movable.showDests)){const l=(t=e.movable.dests)===null||t===void 0?void 0:t.get(e.selected);if(l)for(const c of l)Ye(r,c,"move-dest"+(e.pieces.has(c)?" oc":""));const a=(o=(s=e.premovable.customDests)===null||s===void 0?void 0:s.get(e.selected))!==null&&o!==void 0?o:e.premovable.dests;if(a)for(const c of a)Ye(r,c,"premove-dest"+(e.pieces.has(c)?" oc":""))}const n=e.premovable.current;if(n)for(const l of n)Ye(r,l,"current-premove");else e.predroppable.current&&Ye(r,e.predroppable.current.key,"current-premove");const i=e.exploding;if(i)for(const l of i.keys)Ye(r,l,"exploding"+i.stage);return e.highlight.custom&&e.highlight.custom.forEach((l,a)=>{Ye(r,a,l)}),r}function Ye(e,t,s){const o=e.get(t);o?e.set(t,`${o} ${s}`):e.set(t,s)}function yo(e,t,s){const o=e.get(t);o?o.push(s):e.set(t,[s])}function rf(e,t,s){const o=new Map,r=[];for(const l of e)o.set(l.hash,!1);let n=t.firstElementChild,i;for(;n;)i=n.getAttribute("cgHash"),o.has(i)?o.set(i,!0):r.push(n),n=n.nextElementSibling;for(const l of r)t.removeChild(l);for(const l of e)o.get(l.hash)||t.appendChild(s(l))}function nf(e,t){const s=e.drawable.autoShapes.filter(o=>o.piece).map(o=>({shape:o,hash:cf(o),current:!1}));rf(s,t,o=>af(e,o,e.dom.bounds()))}function lf(e){var t;const s=Ce(e),o=bs(e.dom.bounds());let r=(t=e.dom.elements.autoPieces)===null||t===void 0?void 0:t.firstChild;for(;r;)wi(r,o(J(r.cgKey),s),r.cgScale),r=r.nextSibling}function af(e,{shape:t,hash:s},o){var r,n,i;const l=t.orig,a=(r=t.piece)===null||r===void 0?void 0:r.role,c=(n=t.piece)===null||n===void 0?void 0:n.color,u=(i=t.piece)===null||i===void 0?void 0:i.scale,h=et("piece",`${a} ${c}`);return h.setAttribute("cgHash",s),h.cgKey=l,h.cgScale=u,wi(h,bs(o)(J(l),Ce(e)),u),h}const cf=e=>{var t,s,o;return[e.orig,(t=e.piece)===null||t===void 0?void 0:t.role,(s=e.piece)===null||s===void 0?void 0:s.color,(o=e.piece)===null||o===void 0?void 0:o.scale].join(",")};function uf(e,t){const s=Ru();$i(s,{});function o(){const r="dom"in s?s.dom.unbind:void 0,n=Yu(e,s),i=Qc(()=>n.board.getBoundingClientRect()),l=u=>{tf(c),n.autoPieces&&nf(c,n.autoPieces),!u&&n.svg&&Lu(c,n.svg,n.customSvg)},a=()=>{nn(c),sf(c),n.autoPieces&&lf(c)},c=s;return c.dom={elements:n,bounds:i,redraw:ff(l),redrawNow:l,unbind:r},c.drawable.prevSvgHash="",nn(c),l(!1),Zu(c,a),r||(c.dom.unbind=Xu(c,a)),c.events.insert&&c.events.insert(n),c}return Ou(o(),o)}function ff(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame(()=>{e(),t=!1}))}}class hf{game;board;boardState;props;emit;constructor(t,s,o,r){this.boardState=s,this.props=o,this.emit=r,this.game=new Kc,this.board=uf(t),this.resetBoard()}updateGameState({updateFen:t=!0}={}){this.boardState.historyViewerState.isEnabled||(t&&this.board.set({fen:this.game.fen()}),this.board.state.turnColor=this.getTurnColor(),this.board.state.movable.free?(this.board.state.movable.color="both",this.board.state.movable.dests=new Map):(this.board.state.movable.color=this.props.playerColor||this.board.state.turnColor,this.board.state.movable.dests=Jr(this.game)),this.displayInCheck(this.game.inCheck(),this.board.state.turnColor),this.boardState.showThreats&&this.drawMoves()),this.emitEvents()}displayInCheck(t,s){if(t){for(const[o,r]of this.board.state.pieces)if(r.role==="king"&&r.color===s){this.board.state.check=o;return}}else this.board.state.check=void 0}emitEvents(){this.game.inCheck()&&this.emit(this.game.isCheckmate()?"checkmate":"check",this.board.state.turnColor),this.game.isDraw()&&this.emit("draw"),this.game.isStalemate()&&this.emit("stalemate")}async changeTurn(t,s,o){let r;Hc(s,this.game.get(t))&&(r=await new Promise(n=>{this.boardState.promotionDialogState={isEnabled:!0,color:this.getTurnColor(),callback:n}})),this.move({from:t,to:s,promotion:r})}resetBoard(){this.setConfig(this.props.boardConfig,!0)}undoLastMove(){const t=this.game.undo();if(t!=null&&(this.boardState.historyViewerState.isEnabled&&this.boardState.historyViewerState.plyViewing===this.getCurrentPlyNumber()&&this.stopViewingHistory(),!this.boardState.historyViewerState.isEnabled)){this.board.set({fen:t.before}),this.updateGameState({updateFen:!1});const s=this.getLastMove();this.board.state.lastMove=s?[s?.from,s?.to]:void 0}}getMaterialCount(){const t=this.board.state.pieces,s={pawn:1,knight:3,bishop:3,rook:5,queen:9,king:0},o={materialWhite:0,materialBlack:0,materialDiff:0};for(const r of t)r[1].color==="white"?o.materialWhite+=s[r[1].role]:o.materialBlack+=s[r[1].role];return o.materialDiff=o.materialWhite-o.materialBlack,o}getCapturedPieces(){const t={white:[],black:[]};for(const{color:s,captured:o}of this.getHistory(!0))o&&t[Es(s)].push(o);return t}toggleOrientation(){this.board.toggleOrientation()}drawMoves(){this.boardState.showThreats=!0,this.board.setShapes(qc(this.game.moves({verbose:!0})))}hideMoves(){this.boardState.showThreats=!1,this.board.setShapes([])}drawMove(t,s,o){this.board.setShapes([{orig:t,dest:s,brush:o}])}toggleMoves(){this.boardState.showThreats?this.hideMoves():this.drawMoves()}async getOpeningName(){try{const t=this.game.history({verbose:!0}).map(s=>s.lan).join(",");return(await(await fetch(`https://explorer.lichess.ovh/masters?play=${t}`)).json()).opening?.name??null}catch{return null}}move(t){let s;try{s=this.game.move(t)}catch{return typeof t=="object"&&this.board.state.movable.free&&(this.board.move(t.from,t.to),this.updateGameState({updateFen:!1})),!1}return this.emit("move",s),s?.promotion&&this.emit("promotion",{color:Es(s.color),promotedTo:s.promotion.toUpperCase(),sanMove:s.san}),this.boardState.historyViewerState.isEnabled||(this.board.move(s.from,s.to),(s.flags==="e"||s?.promotion)&&setTimeout(()=>this.board.set({fen:s.after}),this.board.state.animation.current?this.board.state.animation.duration:0),this.updateGameState({updateFen:!1}),Fn(this.board.playPremove)),!0}getTurnColor(){return Es(this.game.turn())}getPossibleMoves(){return Jr(this.game)}getCurrentTurnNumber(){return this.game.moveNumber()}getCurrentPlyNumber(){return 2*this.getCurrentTurnNumber()-(this.getTurnColor()==="black"?1:2)}getLastMove(){return this.game.history({verbose:!0}).at(-1)}getHistory(t=!1){return this.game.history({verbose:t})}getFen(){return this.game.fen()}getBoardPosition(){return this.game.board()}getPgn(){return this.game.pgn()}getIsGameOver(){return this.game.isGameOver()}getIsCheckmate(){return this.game.isCheckmate()}getIsCheck(){return this.game.isCheck()}getIsStalemate(){return this.game.isStalemate()}getIsDraw(){return this.game.isDraw()}getIsThreefoldRepetition(){return this.game.isThreefoldRepetition()}getIsInsufficientMaterial(){return this.game.isInsufficientMaterial()}getSquareColor(t){return this.game.squareColor(t)}getSquare(t){return this.game.get(t)}setPosition(t){this.game.load(t),this.boardState.historyViewerState={isEnabled:!1},this.updateGameState()}putPiece(t,s){if(this.board.state.movable.free){const o=this.board.state.pieces;return o.set(s,{color:t.color==="w"?"white":"black",role:jc[t.type]}),this.board.setPieces(o),!0}else{const o=this.game.put(t,s);return o&&this.updateGameState(),o}}removePiece(t){this.board.state.pieces.delete(t),this.game.remove(t)}clearBoard(){this.game.clear(),this.boardState.historyViewerState={isEnabled:!1},this.updateGameState()}setShapes(t){this.board.setShapes(t)}loadPgn(t){this.game.loadPgn(t),this.boardState.historyViewerState={isEnabled:!1},this.updateGameState();const s=this.getLastMove();s&&this.board.set({lastMove:[s.from,s.to]})}getPgnInfo(){return this.game.header()}setPgnInfo(t){return this.game.header(...Object.entries(t).flat())}setConfig(t,s=!1){if(s&&(t=vi(Bc,t),this.board.state.selected=void 0),t.movable?.events&&"after"in t.movable.events){const n=t.movable.events.after;t.movable.events.after=n?async(...i)=>{await this.changeTurn(...i),n(...i)}:this.changeTurn.bind(this)}const{fen:o,...r}=t;this.board.set(r),o&&this.setPosition(o),this.board.redrawAll()}viewHistory(t){const s=this.getHistory(!0);if(t<0||t>s.length)return;const o=this.board.state.animation.enabled&&(this.boardState.historyViewerState.isEnabled&&Math.abs(this.boardState.historyViewerState.plyViewing-t)!==1||!this.boardState.historyViewerState.isEnabled&&t!==s.length-1);if(o&&this.board.set({animation:{enabled:!1}}),t<s.length)this.boardState.historyViewerState.isEnabled?this.boardState.historyViewerState.plyViewing=t:this.boardState.historyViewerState={isEnabled:!0,plyViewing:t,viewOnly:this.board.state.viewOnly},this.board.set({fen:s[t].before,viewOnly:!0,lastMove:t>0?[s[t-1].from,s[t-1].to]:void 0,selected:void 0}),this.displayInCheck(t>0?"+#".includes(s[t-1].san.at(-1)):!1,Es(s[t].color)),this.board.cancelPremove();else if(this.boardState.historyViewerState.isEnabled){const r=s.at(-1);this.board.set({fen:r.after,viewOnly:this.boardState.historyViewerState.viewOnly,lastMove:[r.from,r.to]}),this.boardState.historyViewerState={isEnabled:!1},this.updateGameState({updateFen:!1})}o&&this.board.set({animation:{enabled:!0}})}stopViewingHistory(){this.boardState.historyViewerState.isEnabled&&this.viewHistory(this.getCurrentPlyNumber())}viewStart(){this.viewHistory(0)}viewNext(){this.boardState.historyViewerState.isEnabled&&this.viewHistory(this.boardState.historyViewerState.plyViewing+1)}viewPrevious(){const t=this.boardState.historyViewerState.isEnabled?this.boardState.historyViewerState.plyViewing:this.getCurrentPlyNumber();this.viewHistory(t-1)}}const df={class:"main-board"},pf=Ys({__name:"TheChessboard",props:{boardConfig:{default:()=>({})},playerColor:{},reactiveConfig:{type:Boolean,default:!1}},emits:["boardCreated","check","checkmate","stalemate","draw","promotion","move"],setup(e,{emit:t}){const s=e,o=Et(null),r=ls({showThreats:!1,promotionDialogState:{isEnabled:!1},historyViewerState:{isEnabled:!1}});return Jo(()=>{if(o.value==null)throw new Error("vue3-chessboard: Failed to mount board.");const n=new hf(o.value,r,s,t);if(t("boardCreated",n),s.reactiveConfig){let i=qs(s.boardConfig);Ms(ls(s.boardConfig),l=>{n.setConfig(_i(i,l)),i=qs(l)})}}),(n,i)=>(ne(),ce("section",{class:ps(["main-wrap",{disabledBoard:r.promotionDialogState.isEnabled,viewingHistory:r.historyViewerState.isEnabled}])},[z("div",df,[r.promotionDialogState.isEnabled?(ne(),ui(xc,{key:0,state:r.promotionDialogState,onPromotionSelected:i[0]||(i[0]=l=>r.promotionDialogState={isEnabled:!1})},null,8,["state"])):As("",!0),z("div",{ref_key:"boardElement",ref:o},null,512)])],2))}});class Nt{moves;result;userIsWhite;constructor(t,s,o){this.moves=t,this.result=s,this.userIsWhite=o}static parse(t,s){return new Nt(Nt.parseMoves(t),Nt.parseResult(t),Nt.parseUserIsWhite(t,s))}static parseMoves(t){return t.replace(/\s*\[[^\]]*\]\s*/g,"").replace(/\{[^}]*\}/g,"").replace(/\([^)]*\)/g,"").replace(/(\r\n|\n|\r)/gm," ").trim().split(" ").filter(a=>a.length>0).filter(a=>!(!a||a.match(/^\d+\.(?:\.\.)?$/)||a==="1-0"||a==="0-1"||a==="1/2-1/2"||a==="*"||a.startsWith("$")))}static parseResult(t){const s=t.match(/\s*\[Result\s+\"(.*?)\"\s*\]/);if(s&&s[1]){const o=s[1];if(o==="1-0")return"white";if(o==="0-1")return"black";if(o==="1/2-1/2")return"draw"}throw"PGN does not contain a result tag"}static parseUserIsWhite(t,s){const o=t.toLowerCase(),r=s.toLowerCase(),n=`[white "${r}"]`,i=`[black "${r}"]`;if(o.includes(n))return!0;if(o.includes(i))return!1;throw`PGN doesn't contain a color for user ${s}`}}async function gf(e){const t=`https://api.chess.com/pub/player/${e}/games/archives`,s=await an(t);if(!s)return[];const o=JSON.parse(s);if(!o.archives)return[];const r=[];for(const n of o.archives){const i=await an(n);if(!i)continue;const l=JSON.parse(i);if(l.games){for(const a of l.games)if(a.pgn)try{r.push(Nt.parse(a.pgn,e))}catch{console.log("Failed to parse PGN, excluding from results: "+a.pgn);continue}}}return r}async function an(e){try{const t=await fetch(e);if(t.ok)return await t.text()}catch(t){console.error(`Error fetching ${e}:`,t)}return""}class cn{move;count;parent;children;isWhite;resultCounts;constructor(t,s=!0){this.move=t,this.count=0,this.children=new Map,this.isWhite=s,this.resultCounts=new Map([["white",0],["black",0],["draw",0]])}}class hr{root;static#e=20;constructor(){this.root=new cn("root")}addMoveSequence(t){let s=this.root;s.count++;const o=s.resultCounts.get(t.result)||0;s.resultCounts.set(t.result,o+1);let r=!0,n=0;for(const i of t.moves){let l=s.children.get(i);l||(l=new cn(i,r),s.children.set(i,l),l.parent=s),s=l,s.count++;const a=s.resultCounts.get(t.result)||0;if(s.resultCounts.set(t.result,a+1),r=!r,n++,n>hr.#e)break}}}function un(e){const t=new hr;for(const s of e)t.addMoveSequence(s);return t}const mf={id:"sidebar"},bf={id:"buttons"},vf={class:"top-buttons"},_f={key:0,class:"pi pi-copy"},yf={key:1,class:"pi pi-check-circle"},wf={key:0,class:"pi pi-spin pi-spinner"},Sf={key:1,class:"pi pi-cloud-download"},Cf={id:"move-list"},xf={key:0},Ef=["onClick"],kf={class:"result-bar"},Pf={key:0},Mf={key:0},Tf={key:0},Af={key:1},If=2e3,Of=Ys({__name:"ChessSidebar",props:{boardAPI:{}},setup(e){const t=e,s=Et(!0),o=()=>{s.value=!s.value,t.boardAPI?.resetBoard(),s.value?h.value=c.root:(t.boardAPI?.toggleOrientation(),h.value=u.root)},r=()=>{t.boardAPI?.undoLastMove(),h.value&&h.value.parent&&(h.value=h.value.parent)},n=T=>{T.key==="ArrowLeft"&&r()};Jo(()=>{window.addEventListener("keyup",n)}),Fs(()=>{window.removeEventListener("keyup",n)});const i=()=>{t.boardAPI?.resetBoard(),s.value?h.value=c.root:(t.boardAPI?.toggleOrientation(),h.value=u.root)},l=Et(!1),a=async()=>{const T=t.boardAPI?.getPgn()||"";T===""&&alert("Failed to copy PGN");try{await navigator.clipboard.writeText(T)}catch(C){alert("Failed to copy PGN: "+C)}l.value=!0,setTimeout(()=>{l.value=!1},If)};Fs(()=>{});let c,u;const h=Et(void 0),p=gi(()=>h.value?[...h.value.children].sort(([,T],[,C])=>C.count-T.count):[]),g=Et(""),b=Et(!1),v=async()=>{if(!g.value){alert("Please enter a Chess.com username.");return}b.value=!0;let T=[];try{T=await gf(g.value)}catch(x){alert("Error loading games: "+x)}finally{b.value=!1}const C=T.filter(x=>x.userIsWhite),O=T.filter(x=>!x.userIsWhite);c=un(C),u=un(O),s.value?h.value=c.root:h.value=u.root,i()},R=T=>{if(!h.value)return;const C=h.value.children.get(T);C&&(t.boardAPI?.move(T),h.value=C)};return(T,C)=>(ne(),ce("div",mf,[z("div",bf,[z("div",vf,[z("button",{onClick:o,title:"Flip board"},C[1]||(C[1]=[z("span",{class:"pi pi-sort-alt"},null,-1)])),z("button",{onClick:r,title:"Undo move"},C[2]||(C[2]=[z("span",{class:"pi pi-arrow-left"},null,-1)])),z("button",{onClick:i,title:"Reset board"},C[3]||(C[3]=[z("span",{class:"pi pi-undo"},null,-1)])),z("button",{onClick:a,title:"Copy PGN"},[l.value?(ne(),ce("span",yf)):(ne(),ce("span",_f))])]),z("div",null,[Vl(z("input",{"onUpdate:modelValue":C[0]||(C[0]=O=>g.value=O),onKeyup:mc(v,["enter"]),placeholder:"chess.com username"},null,544),[[pc,g.value]]),z("button",{onClick:v,title:"Load chess.com games"},[b.value?(ne(),ce("span",wf)):(ne(),ce("span",Sf))])])]),z("div",Cf,[z("h3",null,"Next Move ("+St(h.value?.count||0)+" games)",1),h.value?(ne(),ce("ul",xf,[(ne(!0),ce(Ne,null,Bn(p.value,([O,x])=>(ne(),ce("li",{key:O},[z("button",{onClick:()=>R(O)},St(O),9,Ef),z("span",null,St(x.count)+" times",1),z("div",kf,[z("div",{class:"white-segment",style:Ft({width:`${(x.resultCounts.get("white")||0)/x.count*100}%`})},[(x.resultCounts.get("white")||0)/x.count*100>5?(ne(),ce("span",Pf,St(Math.round((x.resultCounts.get("white")||0)*100/x.count))+"% ",1)):As("",!0)],4),z("div",{class:"black-segment",style:Ft({width:`${(x.resultCounts.get("black")||0)/x.count*100}%`})},[(x.resultCounts.get("black")||0)/x.count*100>5?(ne(),ce("span",Mf,St(Math.round((x.resultCounts.get("black")||0)*100/x.count))+"% ",1)):As("",!0)],4),z("div",{class:"draw-segment",style:Ft({width:`${(x.resultCounts.get("draw")||0)/x.count*100}%`})},[(x.resultCounts.get("draw")||0)/x.count*100>5?(ne(),ce("span",Tf,St(Math.round((x.resultCounts.get("draw")||0)*100/x.count))+"% ",1)):As("",!0)],4)])]))),128))])):(ne(),ce("p",Af,"No moves loaded."))])]))}}),Yi=(e,t)=>{const s=e.__vccOpts||e;for(const[o,r]of t)s[o]=r;return s},Rf=Yi(Of,[["__scopeId","data-v-c031de5b"]]),Nf=Ys({__name:"App",setup(e){const t={coordinates:!0,orientation:"white",viewOnly:!0,blockTouchScroll:!0},s=Et();return(o,r)=>(ne(),ce("main",null,[De(Nn(pf),{"board-config":t,onBoardCreated:r[0]||(r[0]=n=>s.value=n)}),De(Rf,{boardAPI:s.value},null,8,["boardAPI"])]))}}),Lf=Yi(Nf,[["__scopeId","data-v-3ae0a493"]]);_c(Lf).mount("#app");
